/*draw.js v0.0.0 GPL-3.0*/"use strict";function _typeof(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t,t.document)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=t.document?e(t,t.document):function(t){return e(t,t.document)}:t.Draw=e(t,t.document)}("undefined"!=typeof window?window:void 0,function(t,e){function r(t,e){for(var r=""+t;r.length<e;)r="0"+r;return r}function n(t){for(var e in u)if(t.constructor==u[e])return e.toLowerCase()}function i(t){return u.prop.prop.call(t,"type")+u.prop.prop.call(t,"id")}function o(t){t.dom&&t.dom.tree&&t.updateTree(),t.parent&&o(t.parent)}var u=this.Draw=function(t){return new u.Doc(t)};return u.id=0,u.extend=function(t,e){for(var r in e)"function"==typeof e[r]?t.prototype[r]=e[r]:"require"==r&&e[r].forEach(function(e){u.extend(t,e)});return e},u.create=function(t){var e="function"==typeof t.construct?t.construct:function(t){this.prop({id:r(++u.id,4),name:t,type:n(this)})};return t.inherit&&(e.prototype=Object.create(t.inherit.prototype),e.prototype.constructor=e),t.require&&t.require.forEach(function(t){u.extend(e,t)}),t.methods&&u.extend(e,t.methods),t.init&&u.extend(t.parent||u.Container,t.init),e},u.defaults={x:0,y:0,width:0,length:0,originX:0,originY:0,r:0,a:0},u.json={stringify:function(t){return JSON.stringify(this,t,2)}},u.tree={require:[u.json],createTree:function(){var t=e.createElement("div");t.className="element-tree";var r=e.createElement("pre");return t.appendChild(r),this.dom=this.dom||{},this.dom.tree=t,this.updateTree()},updateTree:function(){var t=function(t,e){if("dom"!=t&&"parent"!=t&&"id"!=t&&"type"!=t){if("children"==t){var r={};return e.forEach(function(t){r[i(t)]=t}),r}return e}},e=this.stringify(t).split('"').join("");this.dom.tree.firstChild.textContent=i(this)+": "+e;var r=e.split("\n").reduce(function(t,e){return t.length>e.length?t:e});return this.dom.tree.style.width=Math.min(r.length+4,84)+"ch",this.dom.tree}},u.prop={prop:function(t,e){if(this.properties=this.properties||{},null==t){t={};for(var r in this.properties)t[r]=this.properties[r];return t}if("object"===("undefined"==typeof t?"undefined":_typeof(t))){var n=!1;for(var r in t)t[r]=this.prop(r,t[r]),n|="object"===_typeof(t[r]);return n?this:t}return null==e?(e=this.properties[t],null==e?u.defaults[t]:e):(this.properties[t]=e,o(this),this)}},u.size={require:[u.prop],width:function(t){return this.prop("width",t)},height:function(t){return this.prop("height",t)},size:function(t,e){return this.prop({width:t,height:e})}},u.move={require:[u.prop],x:function(t){return this.prop("x",t)},y:function(t){return this.prop("y",t)},move:function(t,e){return this.prop({x:t,y:e})}},u.radius={require:[u.prop],rx:function(t){return this.prop("rx",t)},ry:function(t){return this.prop("ry",t)},radius:function(t,e){return this.prop({rx:t,ry:e})}},u.transform={require:[u.prop],transform:function(t){for(var e in t)t[e]=null==t[e]?t[e]:this.prop(e)+t[e];return this.prop(t)}},u.transforms={require:[u.transform],translate:function(t,e){return this.transform({x:t,y:e})},scale:function(t,e,r,n){},rotate:function(t,e,r){},skew:function(t,e,r,n){}},u.Container=u.create({require:[u.tree],methods:{parent:function(){return this.parent},child:function(t){return this.children[t]},put:function(t){return t.parent=this,this.children=this.children||[],this.children.push(t),t}}}),u.Doc=u.create({construct:function(t){t&&(t="string"==typeof t?e.getElementById(t):t,this.children=[],this.dom=t)},inherit:u.Container,init:{doc:function(t){this.constructor.call(this,t)}}}),u.Group=u.create({inherit:u.Container,require:[u.prop],init:{group:function(t){return this.put(new u.Group(t))}}}),u.Page=u.create({inherit:u.Group,require:[u.size],methods:{origin:function(t,e){return this.prop({originX:t,originY:e})}},init:{page:function(t){return this.put(new u.Page(t))}}}),u.Element=u.create({require:[u.prop,u.size],methods:{parent:function(){return this.parent}}}),u.Line=u.create({inherit:u.Element,require:[u.move],methods:{},init:{line:function(t,e,r,n){return new u.Line}}}),u.Rect=u.create({inherit:u.Element,require:[u.move,u.radius],methods:{getRekt:function(){return this.prop()}},init:{rect:function(t,e){return this.put(new u.Rect).size(t,e)}}}),u.Circle=u.create({inherit:u.Element,require:[u.move],methods:{radius:function(t){return this.prop("r",t)}},init:{circle:function(t){return this.put(new u.Circle).radius(t)}}}),u});