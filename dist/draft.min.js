"use strict";!function(t,e){if("function"==typeof define&&define.amd)define([],e);else if("undefined"!=typeof exports)e();else{var n={exports:{}};e(),t.draftMin=n.exports}}(this,function(){function t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==("undefined"==typeof e?"undefined":i(e))&&"function"!=typeof e?t:e}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof e?"undefined":i(e)));t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function r(t,e){for(var n=""+t;n.length<e;)n="0"+n;return n}function o(t){for(var e in a)if(t.constructor==a[e])return e.toLowerCase()}function s(t){return t.doc.elements[t.prop("type")].length}function u(t){return null==t?t:t+"_u"}function p(t,e){var n=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/g;return t=String(t),"string"==typeof e?new RegExp(n.source+e+"$","ig").test(t):null!==n.exec(t)?t.slice(n.lastIndex)||"px":!1}var f=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=(void 0).Draft={mixins:{},domID:function(t){return"DraftJS_"+t.prop("type")+"_"+r(t.prop("id"),4)},px:function(t){var e=parseFloat(t,10),n=p(t);return"px"==n?e:"pt"==n?a.px(e/72+"in"):"pc"==n?a.px(12*e+"pt"):"in"==n?e*c.dpi:"ft"==n?a.px(12*e+"in"):"yd"==n?a.px(3*e+"ft"):"mi"==n?a.px(1760*e+"yd"):n.endsWith("m")?("mm"==n?e*=1:"cm"==n?e*=10:"km"==n&&(e*=1e6),a.px(e/25.4+"in")):void 0}};a.inherit=function(t,e,n){var i=t.prototype=Object.create(e.prototype);i.constructor=t,(n||"undefined"==typeof n)&&(t._super=e.prototype)},a.mixin=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t.prototype[n]=e[n])};var c={system:"cartesian",units:"px",dpi:96};a.mixins.event={on:function(t,e){var n=this.getListeners(t,!0);for(var r in n){var o=n[r];-1===o.map(function(t){return t.listener}).lastIndexOf(e)&&o.push("object"===("undefined"==typeof e?"undefined":i(e))?e:{listener:e,once:!1})}return this},once:function(t,e){return this.on(t,{listener:e,once:!0})},off:function(t,e){var n=this.getListeners(t,!0);for(var i in n){var r=n[i],o=r.map(function(t){return t.listener}).lastIndexOf(e);-1!==o&&r.splice(o,1)}return this},fire:function(t,e){Array.isArray(e)||(e=[e]);var n=this.getListeners(t,!0);for(var i in n)for(var r=n[i],o=r.length;o--;){var s=r[o],u=s.listener.apply({target:this,timeStamp:new Date,type:i},e);(s.once===!0||"off"===u)&&this.off(t,s.listener)}return this},defineEvent:function(){for(var t=0;t<arguments.length;t++)this.getListeners(arguments[t]);return this},removeEvent:function(t){var e=this._getEvents();if("string"==typeof t)delete e[t];else if(t instanceof RegExp)for(var n in e)t.test(n)&&delete e[n];else delete this._events;return this},getListeners:function(t,e){var n=this._getEvents(),i={};if(t instanceof RegExp)for(var r in n)t.test(r)&&(i[r]=n[r]);else{var o=n[t]||(n[t]=[]);void 0===e?i=o:i[t]=o}return i},_getEvents:function(){return this._events||(this._events={})}},a.mixins.system={system:function(t){return this.prop("system",t)}},a.mixins.units={units:function(t){return this.prop("units",t)}},a.mixins.position={position:function(t,e,n){return this.prop({x:u(t),y:u(e),z:u(n)})},pos:function(){return this.position(arguments)}},a.mixins.rotation={rotation:function(t,e,n){return this.prop({"α":t,"β":e,"γ":n})},rot:function(){return this.rotation(arguments)}},a.mixins.size={width:function(t){return this.prop("width",u(t))},height:function(t){return this.prop("height",u(t))},size:function(t,e){return this.prop({width:u(t),height:u(e)})}},a.mixins.radius={rx:function(t){return this.prop("rx",u(t))},ry:function(t){return this.prop("ry",u(t))},radius:function(t,e){return this.prop({rx:u(t),ry:u(e)})}},a.mixins.json={stringify:function(t){return JSON.stringify(this,t,2)}},a.Element=function(){function t(){n(this,t),this.dom={},this.dom.node=document.createElement("object"),this.dom.node.element=this,this._properties={},this.prop("type",o(this))}return f(t,[{key:"prop",value:function(t,e){if(null===t)this._properties={};else{if(void 0===t){t={};for(var n in this._properties)t[n]=this._properties[n];return t}if("object"==("undefined"==typeof t?"undefined":i(t))){var r=!1;for(var n in t)t[n]=this.prop(n,t[n]),r|="object"==i(t[n]);return r?this:t}if(null===e)delete this._properties[t];else{if(void 0===e)return this._properties[t]||this.prop(t,c[t]||0);String(e).endsWith("_u")&&(e=e.slice(0,-2),e=isFinite(e)?e+this.parent.prop("units")||c.units:e),this._properties[t]=e;var o=new CustomEvent("update",{detail:{type:this._properties.type,prop:t,val:e},bubbles:!0});this.dom.node.dispatchEvent(o),this.fire("change",[t,e])}}return this}}],[{key:"inherit",value:function(t,e){a.inherit(this,t,e)}},{key:"mixin",value:function(t){a.mixin(this,t)}},{key:"require",value:function(t){if("string"==typeof t)this.mixin(a.mixins[t]);else if(Array.isArray(t)){var e=!0,n=!1,i=void 0;try{for(var r,o=t[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;this.require(s)}}catch(u){n=!0,i=u}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw i}}}}}]),t}(),a.Element.require(["event","position","rotation"]),a.Container=function(i){function r(e){n(this,r);var i=t(this,Object.getPrototypeOf(r).call(this));return i.prop("name",e||null),i.children=[],i}return e(r,i),f(r,[{key:"push",value:function(t){t.parent=this,t.doc=this.doc||this,this.dom.node.appendChild(t.dom.node);var e=t.prop("type");return t.doc.elements[e]=t.doc.elements[e]||[],t.doc.elements[e].push(t),t.prop("id",s(t)),this.children.push(t),this}},{key:"add",value:function(t){return this.push(t),t}}]),r}(a.Element),a.Doc=function(i){function r(e){n(this,r);var i=t(this,Object.getPrototypeOf(r).call(this,e));return i.elements={},i.prop({system:c.system,units:c.units}),i}return e(r,i),r}(a.Container),a.doc=function(t){return new a.Doc(t)},a.Group=function(i){function r(){return n(this,r),t(this,Object.getPrototypeOf(r).apply(this,arguments))}return e(r,i),r}(a.Container),a.Group.require(["system","units"]),a.Container.mixin({group:function(){return this.add(new a.Group(name)).prop({system:this.prop("system"),units:this.prop("units")})}}),a.Page=function(i){function r(){return n(this,r),t(this,Object.getPrototypeOf(r).apply(this,arguments))}return e(r,i),r}(a.Group),a.Page.require("size"),a.Doc.mixin({page:function(t){return this.add(new a.Page(t)).prop({system:this.prop("system"),units:this.prop("units")})}}),a.Line=function(i){function r(){return n(this,r),t(this,Object.getPrototypeOf(r).apply(this,arguments))}return e(r,i),r}(a.Element),a.Container.mixin({line:function(t,e,n,i){return this.add(new a.Line)}}),a.Rect=function(i){function r(){return n(this,r),t(this,Object.getPrototypeOf(r).apply(this,arguments))}return e(r,i),f(r,[{key:"rekt",get:function(){return Math.floor(101*Math.random())+"% rekt"}}]),r}(a.Element),a.Rect.require(["size","radius"]),a.Container.mixin({rect:function(t,e){return this.add(new a.Rect).size(t,e)}}),a.Circle=function(i){function r(){return n(this,r),t(this,Object.getPrototypeOf(r).apply(this,arguments))}return e(r,i),f(r,[{key:"radius",value:function(t){return this.prop("r",u(t))}}]),r}(a.Element),a.Container.mixin({circle:function(t){return this.add(new a.Circle).radius(t)}})});
//# sourceMappingURL=draft.min.js.map
