"use strict";function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _typeof(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function(t,e){"function"==typeof define&&define.amd?define(function(){return e(t,t.document)}):"object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=t.document?e(t,t.document):function(t){return e(t,t.document)}:t.Draft=e(t,t.document)}("undefined"!=typeof window?window:void 0,function(t,e){function n(t,e){for(var n=""+t;n.length<e;)n="0"+n;return n}function r(t){for(var e in u)if(t.constructor==u[e])return e.toLowerCase()}function i(t){return t.doc.elements[t.prop("type")].length}function o(t){return null==t?t:t+"_u"}function s(t,e){var n=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/g;return t=String(t),"string"==typeof e?new RegExp(n.source+e+"$","ig").test(t):null!==n.exec(t)?t.slice(n.lastIndex)||"px":!1}var u={mixins:{},px:function(t){var e=parseFloat(t,10),n=s(t);return"px"==n?e:"pt"==n?u.px(e/72+"in"):"pc"==n?u.px(12*e+"pt"):"in"==n?e*p.dpi:"ft"==n?u.px(12*e+"in"):"yd"==n?u.px(3*e+"ft"):"mi"==n?u.px(1760*e+"yd"):n.endsWith("m")?("mm"==n?e*=1:"cm"==n?e*=10:"km"==n&&(e*=1e6),u.px(e/25.4+"in")):void 0}};u.inherit=function(t,e,n){var r=t.prototype=Object.create(e.prototype);r.constructor=t,(n||"undefined"==typeof n)&&(t._super=e.prototype)},u.mixin=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t.prototype[n]=e[n])};var p={system:"cartesian",units:"px",dpi:96};return u.mixins.event={on:function(t,e){var n=this.getListeners(t,!0);for(var r in n){var i=n[r];i.map(function(t){return t.listener}).includes(e)||i.push("object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{listener:e,once:!1})}return this},once:function(t,e){return this.on(t,{listener:e,once:!0})},off:function(t,e){var n=this.getListeners(t,!0);for(var r in n){var i=n[r],o=i.map(function(t){return t.listener}).lastIndexOf(e);-1!==o&&i.splice(o,1)}return this},fire:function(t,e){Array.isArray(e)||(e=[e]);var n=this.getListeners(t,!0);for(var r in n)for(var i=n[r],o=i.length;o--;){console.info("event fired:",{target:this,timeStamp:new Date,type:r},e);var s=i[o],u=s.listener.apply({target:this,timeStamp:new Date,type:r},e);(s.once===!0||"off"===u)&&this.off(t,s.listener)}return this},defineEvent:function(){for(var t=0;t<arguments.length;t++)this.getListeners(arguments[t]);return this},removeEvent:function(t){var e=this._getEvents();if("string"==typeof t)delete e[t];else if(t instanceof RegExp)for(var n in e)t.test(n)&&delete e[n];else delete this._events;return this},getListeners:function(t,e){var n=this._getEvents(),r={};if(t instanceof RegExp)for(var i in n)t.test(i)&&(r[i]=n[i]);else{var o=n[t]||(n[t]=[]);void 0===e?r=o:r[t]=o}return r},_getEvents:function(){return this._events||(this._events={})}},u.mixins.system={system:function(t){return this.prop("system",t)}},u.mixins.units={units:function(t){return this.prop("units",t)}},u.mixins.position={position:function(t,e,n){return this.prop({x:o(t),y:o(e),z:o(n)})},pos:function(){return this.position.apply(this,arguments)},translate:function(t,e,n){return t=this.prop("x")+t||0,e=this.prop("y")+e||0,n=this.prop("z")+n||0,this.position(t,e,n)}},u.mixins.rotation={rotation:function(t,e,n){return this.prop({"α":t,"β":e,"γ":n})},rot:function(){return this.rotation.apply(this,arguments)},rotate:function(t,e,n){return t=this.prop("α")+t||0,e=this.prop("β")+e||0,n=this.prop("γ")+n||0,this.position(t,e,n)}},u.mixins.size={width:function(t){return this.prop("width",o(t))},height:function(t){return this.prop("height",o(t))},size:function(t,e){return this.prop({width:o(t),height:o(e)})}},u.mixins.radius={rx:function(t){return this.prop("rx",o(t))},ry:function(t){return this.prop("ry",o(t))},radius:function(t,e){return this.prop({rx:o(t),ry:o(e)})}},u.mixins.json={stringify:function(t){return JSON.stringify(this,t,2)}},u.Element=function(){function t(){_classCallCheck(this,t),this.dom={},this.dom.node=e.createElement("object"),this.dom.node.element=this,this._properties={},this.prop("type",r(this))}return _createClass(t,[{key:"getID",value:function(){return["DraftJS",this.prop("type"),n(this.prop("id"),4)].join("_")}},{key:"prop",value:function(t,e){if(null===t)this._properties={};else{if(void 0===t){t={};for(var n in this._properties)t[n]=this._properties[n];return t}if("object"==("undefined"==typeof t?"undefined":_typeof(t))){var r=!1;for(var n in t)t[n]=this.prop(n,t[n]),r|="object"==_typeof(t[n]);return r?this:t}if(null===e)delete this._properties[t];else{if(void 0===e)return this._properties[t]||p[t]||0;String(e).endsWith("_u")&&(e=e.slice(0,-2),e=isFinite(e)?e+this.parent.prop("units")||p.units:e),this._properties[t]=e;var i=new CustomEvent("update",{detail:{type:this._properties.type,prop:t,val:e},bubbles:!0});this.dom.node.dispatchEvent(i),this.fire("change",[t,e])}}return this}}],[{key:"inherit",value:function(t,e){u.inherit(this,t,e)}},{key:"mixin",value:function(t){u.mixin(this,t)}},{key:"require",value:function(t){if("string"==typeof t)this.mixin(u.mixins[t]);else if(Array.isArray(t)){var e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;this.require(s)}}catch(p){n=!0,r=p}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}}}}]),t}(),u.Element.require(["event","position","rotation"]),u.Container=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this));return n.prop("name",t||null),n.children=[],n}return _inherits(e,t),_createClass(e,[{key:"push",value:function(t){t.parent=this,t.doc=this.doc||this,this.dom.node.appendChild(t.dom.node);var e=t.prop("type");return t.doc.elements[e]=t.doc.elements[e]||[],t.doc.elements[e].push(t),t.prop("id",i(t)),this.children.push(t),this}},{key:"add",value:function(t){return this.push(t),t}}]),e}(u.Element),u.Doc=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this,t));return n.elements={},n.prop({system:p.system,units:p.units}),n}return _inherits(e,t),e}(u.Container),u.doc=function(t){return new u.Doc(t)},u.Group=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,Object.getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),e}(u.Container),u.Group.require(["system","units"]),u.Container.mixin({group:function(){return this.add(new u.Group(name)).prop({system:this.prop("system"),units:this.prop("units")})}}),u.View=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,Object.getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),e}(u.Element),u.View.require("size"),u.Group.mixin({view:function(t,e){return this.add(new u.View).size(t,e).pos(0,0)}}),u.Page=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,Object.getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),e}(u.Group),u.Page.require("size"),u.Doc.mixin({page:function(t){return this.add(new u.Page(t)).prop({system:this.prop("system"),units:this.prop("units")})}}),u.Line=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,Object.getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"length",value:function(t){return this.prop("length",o(t))}}]),e}(u.Element),u.Group.mixin({line:function(t){return this.add(new u.Line).length(t)}}),u.Rect=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,Object.getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"rekt",get:function(){return Math.floor(101*Math.random())+"% rekt"}}]),e}(u.Element),u.Rect.require(["size","radius"]),u.Group.mixin({rect:function(t,e){return this.add(new u.Rect).size(t,e)}}),u.Circle=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,Object.getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"radius",value:function(t){return this.prop("r",o(t))}}]),e}(u.Element),u.Group.mixin({circle:function(t){return this.add(new u.Circle).radius(t)}}),u});
//# sourceMappingURL=draft.min.js.map
