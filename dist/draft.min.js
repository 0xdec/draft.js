/*draft.js v0.0.2 | http://draft.D1SC0te.ch | MIT license*/
"use strict";function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _typeof(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"===("undefined"==typeof exports?"undefined":_typeof(exports))?module.exports=e():t.draft=e()}(void 0,function(){function t(t){return null==t?t:t+"_u"}var e=function n(t){return n.doc(t)};return e.defaults={system:"cartesian",units:"px",get dpi(){var t=document.createElement("div");t.style.width="1in",t.style.padding=0,document.getElementsByTagName("body")[0].appendChild(t);var e=t.offsetWidth;return document.getElementsByTagName("body")[0].removeChild(t),e||96}},e.mixins={},e.px=function(t){t=String(t);var n=parseFloat(t,10),r=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/g,i=null===r.exec(t)?!1:t.slice(r.lastIndex)||"px";switch(i){case"px":return n;case"pc":n*=12;case"pt":n/=72;break;case"km":n*=1e3;case"m":n*=10;case"dm":n*=10;case"cm":n*=10;case"mm":n/=25.4;break;case"mi":n*=1760;case"yd":n*=3;case"ft":n*=12;case"in":break;default:return}return n*e.defaults.dpi},e.inherit=function(t,e,n){var r=t.prototype=Object.create(e.prototype);r.constructor=t,(n||"undefined"==typeof n)&&(t._super=e.prototype)},e.mixin=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t.prototype[n]=e[n])},e.mixins.event={on:function(t,e){var n=this.getListeners(t,!0);for(var r in n){var i=n[r];i.map(function(t){return t.listener}).includes(e)||i.push("object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{listener:e,once:!1})}return this},once:function(t,e){return this.on(t,{listener:e,once:!0})},off:function(t,e){var n=this.getListeners(t,!0);for(var r in n){var i=n[r],s=i.map(function(t){return t.listener}).lastIndexOf(e);-1!==s&&i.splice(s,1)}return this},fire:function(t,e){Array.isArray(e)||(e=[e]);var n=this.getListeners(t,!0);for(var r in n)for(var i=n[r],s=i.length;s--;){var o=i[s],u=o.listener.apply({target:this,timeStamp:Date(),type:r},e);(o.once===!0||"off"===u)&&this.off(t,o.listener)}return this},defineEvent:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=!0,i=!1,s=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var a=o.value;this.getListeners(a)}}catch(c){i=!0,s=c}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw s}}return this},removeEvent:function(t){var e=this._getEvents();if("string"==typeof t)delete e[t];else if(t instanceof RegExp)for(var n in e)t.test(n)&&delete e[n];else delete this._events;return this},getListeners:function(t,e){var n=this._getEvents(),r={};if(t instanceof RegExp)for(var i in n)t.test(i)&&(r[i]=n[i]);else{var s=n[t]||(n[t]=[]);void 0===e?r=s:r[t]=s}return r},_getEvents:function(){return this._events||(this._events={})}},e.mixins.system={system:function(t){return this.prop("system",t)}},e.mixins.units={units:function(t){return this.prop("units",t)}},e.mixins.position={position:function(e,n,r){return this.prop({x:t(e),y:t(n),z:t(r)})},pos:function(){return this.position.apply(this,arguments)},translate:function(t,e,n){return t=this.prop("x")+t||0,e=this.prop("y")+e||0,n=this.prop("z")+n||0,this.position(t,e,n)}},e.mixins.rotation={rotation:function(t,e,n){return this.prop({"α":t,"β":e,"γ":n})},rot:function(){return this.rotation.apply(this,arguments)},rotate:function(t,e,n){return t=this.prop("α")+t||0,e=this.prop("β")+e||0,n=this.prop("γ")+n||0,this.position(t,e,n)}},e.mixins.size={size:function(e,n){return this.prop({width:t(e),height:t(n)})},width:function(n){return e.px(this.prop("width",t(n)))},height:function(n){return e.px(this.prop("height",t(n)))}},e.mixins.radius={rx:function(e){return this.prop("rx",t(e))},ry:function(e){return this.prop("ry",t(e))},radius:function(e,n){return this.prop({rx:t(e),ry:t(n)})}},e.Element=function(){function t(n){_classCallCheck(this,t),this._properties={},n&&this.prop("name",n);for(var r in e)if(this.constructor===e[r]){this._type=r.toLowerCase();break}}return _createClass(t,[{key:"prop",value:function(t,n){if(null===t)this._properties={};else{if(void 0===t)return Object(this._properties);if("object"==("undefined"==typeof t?"undefined":_typeof(t))){var r=!1;for(var i in t)t[i]=this.prop(i,t[i]),r=r||"object"==_typeof(t[i]);return r?this:t}if(null===n)this.fire("change",[t,n]),delete this._properties[t];else{if(void 0===n)return void 0===this._properties[t]&&this.prop(t,e.defaults[t]||0),this._properties[t];String(n).endsWith("_u")&&(n=n.slice(0,-2),n=isFinite(n)?n+this.parent.prop("units")||e.defaults.units:n),this._properties[t]=n,this.fire("change",[t,n])}}return this}},{key:"stringify",value:function(t){var e;return Array.isArray(t)?e=function(e,n){return t.includes(e)?void 0:n}:t instanceof RegExp&&(e=function(e,n){return t.test(e)?void 0:n}),JSON.stringify(this,e,2)}},{key:"toJSON",value:function(){return{type:this.type,id:this.id,properties:this.prop(),children:this.children}}},{key:"type",get:function(){return this._type}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this.prop("name")}},{key:"domID",get:function(){for(var t=String(this.id);t.length<4;)t="0"+t;return this.type+"_"+t}}],[{key:"inherit",value:function(t,n){e.inherit(this,t,n)}},{key:"mixin",value:function(t){e.mixin(this,t)}},{key:"require",value:function(t){if("string"==typeof t)this.mixin(e.mixins[t]);else if(Array.isArray(t)){var n=!0,r=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var u=s.value;this.require(u)}}catch(a){r=!0,i=a}finally{try{!n&&o["return"]&&o["return"]()}finally{if(r)throw i}}}}}]),t}(),e.Element.require(["event","position","rotation"]),e.Container=function(t){function e(t){_classCallCheck(this,e);var n=_possibleConstructorReturn(this,Object.getPrototypeOf(e).call(this,t));return n.children=[],n}return _inherits(e,t),_createClass(e,[{key:"add",value:function(t){t.parent=this,t.doc=this.doc||this;var e=t.type;return(t.doc.elements[e]||(t.doc.elements[e]=[])).push(t),t._id=t.doc.elements[e].length,this.children.push(t),this.fire("add",[t]),this}},{key:"push",value:function(t){return this.add(t),t}},{key:"remove",value:function(t){return this.fire("remove",[t]),this}},{key:"firstChild",get:function(){return this.children[0]}},{key:"lastChild",get:function(){return this.children[this.children.length-1]}}]),e}(e.Element),e.Doc=function(t){function n(t){_classCallCheck(this,n);var r=_possibleConstructorReturn(this,Object.getPrototypeOf(n).call(this,t));return r.elements={},r.prop({system:e.defaults.system,units:e.defaults.units}),r}return _inherits(n,t),n}(e.Container),e.doc=function(t){var n=new e.Doc(t);return(e.docs||(e.docs=[])).push(n),n._id=e.docs.length,n},e.Group=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,Object.getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),e}(e.Container),e.Group.require(["system","units"]),e.Container.mixin({group:function(t){return this.push(new e.Group(t)).prop({system:this.prop("system"),units:this.prop("units")})}}),e.View=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,Object.getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"aspectRatio",get:function(){var t=function(e,n){return n?t(n,e%n):e};return t=t(this.width(),this.height()),this.width()/t+":"+this.height()/t}}]),e}(e.Element),e.View.require("size"),e.Group.mixin({view:function(t,n){return this.push(new e.View).size(t,n)}}),e.Line=function(e){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return _inherits(n,e),_createClass(n,[{key:"length",value:function(e){return this.prop("length",t(e))}}]),n}(e.Element),e.Group.mixin({line:function(t){return this.push(new e.Line).length(t)}}),e.Rect=function(t){function e(){return _classCallCheck(this,e),_possibleConstructorReturn(this,Object.getPrototypeOf(e).apply(this,arguments))}return _inherits(e,t),_createClass(e,[{key:"rekt",get:function(){return Math.floor(101*Math.random())+"% rekt"}}]),e}(e.Element),e.Rect.require(["size","radius"]),e.Group.mixin({rect:function(){var t=arguments.length<=0||void 0===arguments[0]?100:arguments[0],n=arguments.length<=1||void 0===arguments[1]?100:arguments[1];return this.push(new e.Rect).size(t,n)}}),e.Circle=function(e){function n(){return _classCallCheck(this,n),_possibleConstructorReturn(this,Object.getPrototypeOf(n).apply(this,arguments))}return _inherits(n,e),_createClass(n,[{key:"radius",value:function(e){return this.prop("r",t(e))}}]),n}(e.Element),e.Group.mixin({circle:function(){var t=arguments.length<=0||void 0===arguments[0]?50:arguments[0];return this.push(new e.Circle).radius(t)}}),e});
//# sourceMappingURL=draft.min.js.map
