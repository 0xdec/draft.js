/*draft.js v0.0.3 | http://draft.D1SC0te.ch | MIT license*/
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.draft=e()}(this,function(){"use strict";function t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function i(t){return null==t?t:t+"_u"}var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function u(t){return u.doc(t)};return o.defaults={system:"cartesian",units:"px",get dpi(){var t=document.createElement("div");t.style.width="1in",t.style.padding=0,document.getElementsByTagName("body")[0].appendChild(t);var e=t.offsetWidth;return document.getElementsByTagName("body")[0].removeChild(t),e||96}},o.mixins={},o.px=function(t){t=String(t);var e=parseFloat(t,10),n=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/g,r=null===n.exec(t)?!1:t.slice(n.lastIndex)||"px";switch(r){case"px":return e;case"pc":e*=12;case"pt":e/=72;break;case"km":e*=1e3;case"m":e*=10;case"dm":e*=10;case"cm":e*=10;case"mm":e/=25.4;break;case"mi":e*=1760;case"yd":e*=3;case"ft":e*=12;case"in":break;default:return}return e*o.defaults.dpi},o.inherit=function(t,e,n){var r=t.prototype=Object.create(e.prototype);r.constructor=t,(n||"undefined"==typeof n)&&(t._super=e.prototype)},o.mixin=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t.prototype[n]=e[n])},o.mixins.event={on:function(t,e){var n=this.getListeners(t,!0);for(var i in n){var s=n[i];s.map(function(t){return t.listener}).includes(e)||s.push("object"===("undefined"==typeof e?"undefined":r(e))?e:{listener:e,once:!1})}return this},once:function(t,e){return this.on(t,{listener:e,once:!0})},off:function(t,e){var n=this.getListeners(t,!0);for(var r in n){var i=n[r],s=i.map(function(t){return t.listener}).lastIndexOf(e);-1!==s&&i.splice(s,1)}return this},fire:function(t,e){Array.isArray(e)||(e=[e]);var n=this.getListeners(t,!0);for(var r in n)for(var i=n[r],s=i.length;s--;){var o=i[s],u=o.listener.apply({target:this,timeStamp:Date(),type:r},e);(o.once===!0||"off"===u)&&this.off(t,o.listener)}return this},defineEvent:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=!0,i=!1,s=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var a=o.value;this.getListeners(a)}}catch(c){i=!0,s=c}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw s}}return this},removeEvent:function(t){var e=this._getEvents();if("string"==typeof t)delete e[t];else if(t instanceof RegExp)for(var n in e)t.test(n)&&delete e[n];else delete this._events;return this},getListeners:function(t,e){var n=this._getEvents(),r={};if(t instanceof RegExp)for(var i in n)t.test(i)&&(r[i]=n[i]);else{var s=n[t]||(n[t]=[]);void 0===e?r=s:r[t]=s}return r},_getEvents:function(){return this._events||(this._events={})}},o.mixins.system={system:function(t){return this.prop("system",t)}},o.mixins.units={units:function(t){return this.prop("units",t)}},o.mixins.position={position:function(t,e,n){return this.prop({x:i(t),y:i(e),z:i(n)})},pos:function(){return this.position.apply(this,arguments)},translate:function(t,e,n){return t=this.prop("x")+t||0,e=this.prop("y")+e||0,n=this.prop("z")+n||0,this.position(t,e,n)}},o.mixins.rotation={rotation:function(t,e,n){return this.prop({"α":t,"β":e,"γ":n})},rot:function(){return this.rotation.apply(this,arguments)},rotate:function(t,e,n){return t=this.prop("α")+t||0,e=this.prop("β")+e||0,n=this.prop("γ")+n||0,this.position(t,e,n)}},o.mixins.size={size:function(t,e){return this.prop({width:i(t),height:i(e)})},width:function(t){return o.px(this.prop("width",i(t)))},height:function(t){return o.px(this.prop("height",i(t)))}},o.mixins.radius={rx:function(t){return this.prop("rx",i(t))},ry:function(t){return this.prop("ry",i(t))},radius:function(t,e){return this.prop({rx:i(t),ry:i(e)})}},o.Element=function(){function t(e){n(this,t),this._properties={},e&&this.prop("name",e);for(var r in o)if(this.constructor===o[r]){this._type=r.toLowerCase();break}}return s(t,[{key:"prop",value:function(t,e){if(null===t)this._properties={};else{if(void 0===t)return Object(this._properties);if("object"==("undefined"==typeof t?"undefined":r(t))){var n=!1;for(var i in t)t[i]=this.prop(i,t[i]),n=n||"object"==r(t[i]);return n?this:t}if(null===e)this.fire("change",[t,e]),delete this._properties[t];else{if(void 0===e)return void 0===this._properties[t]&&this.prop(t,o.defaults[t]||0),this._properties[t];String(e).endsWith("_u")&&(e=e.slice(0,-2),e=isFinite(e)?e+this.parent.prop("units")||o.defaults.units:e),this._properties[t]=e,this.fire("change",[t,e])}}return this}},{key:"stringify",value:function(t){var e;return Array.isArray(t)?e=function(e,n){return t.includes(e)?void 0:n}:t instanceof RegExp&&(e=function(e,n){return t.test(e)?void 0:n}),JSON.stringify(this,e,2)}},{key:"toJSON",value:function(){return{type:this.type,id:this.id,properties:this.prop(),children:this.children}}},{key:"type",get:function(){return this._type}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this.prop("name")}},{key:"domID",get:function(){for(var t=String(this.id);t.length<4;)t="0"+t;return this.type+"_"+t}}],[{key:"inherit",value:function(t,e){o.inherit(this,t,e)}},{key:"mixin",value:function(t){o.mixin(this,t)}},{key:"require",value:function(t){if("string"==typeof t)this.mixin(o.mixins[t]);else if(Array.isArray(t)){var e=!0,n=!1,r=void 0;try{for(var i,s=t[Symbol.iterator]();!(e=(i=s.next()).done);e=!0){var u=i.value;this.require(u)}}catch(a){n=!0,r=a}finally{try{!e&&s["return"]&&s["return"]()}finally{if(n)throw r}}}}}]),t}(),o.Element.require(["event","position","rotation"]),o.Container=function(r){function i(e){n(this,i);var r=t(this,Object.getPrototypeOf(i).call(this,e));return r.children=[],r}return e(i,r),s(i,[{key:"add",value:function(t){t.parent=this,t.doc=this.doc||this;var e=t.type;return(t.doc.elements[e]||(t.doc.elements[e]=[])).push(t),t._id=t.doc.elements[e].length,this.children.push(t),this.fire("add",[t]),this}},{key:"push",value:function(t){return this.add(t),t}},{key:"remove",value:function(t){return this.fire("remove",[t]),this}},{key:"firstChild",get:function(){return this.children[0]}},{key:"lastChild",get:function(){return this.children[this.children.length-1]}}]),i}(o.Element),o.Doc=function(r){function i(e){n(this,i);var r=t(this,Object.getPrototypeOf(i).call(this,e));return r.elements={},r.prop({system:o.defaults.system,units:o.defaults.units}),r}return e(i,r),i}(o.Container),o.doc=function(t){var e=new o.Doc(t);return(o.docs||(o.docs=[])).push(e),e._id=o.docs.length,e},o.Group=function(r){function i(){return n(this,i),t(this,Object.getPrototypeOf(i).apply(this,arguments))}return e(i,r),i}(o.Container),o.Group.require(["system","units"]),o.Container.mixin({group:function(t){return this.push(new o.Group(t)).prop({system:this.prop("system"),units:this.prop("units")})}}),o.View=function(r){function i(){return n(this,i),t(this,Object.getPrototypeOf(i).apply(this,arguments))}return e(i,r),s(i,[{key:"aspectRatio",get:function(){var t=function(e,n){return n?t(n,e%n):e};return t=t(this.width(),this.height()),this.width()/t+":"+this.height()/t}}]),i}(o.Element),o.View.require("size"),o.Group.mixin({view:function(t,e){return this.push(new o.View).size(t,e)}}),o.Line=function(r){function o(){return n(this,o),t(this,Object.getPrototypeOf(o).apply(this,arguments))}return e(o,r),s(o,[{key:"length",value:function(t){return this.prop("length",i(t))}}]),o}(o.Element),o.Group.mixin({line:function(t){return this.push(new o.Line).length(t)}}),o.Rect=function(r){function i(){return n(this,i),t(this,Object.getPrototypeOf(i).apply(this,arguments))}return e(i,r),s(i,[{key:"rekt",get:function(){return Math.floor(101*Math.random())+"% rekt"}}]),i}(o.Element),o.Rect.require(["size","radius"]),o.Group.mixin({rect:function(){var t=arguments.length<=0||void 0===arguments[0]?100:arguments[0],e=arguments.length<=1||void 0===arguments[1]?100:arguments[1];return this.push(new o.Rect).size(t,e)}}),o.Circle=function(r){function o(){return n(this,o),t(this,Object.getPrototypeOf(o).apply(this,arguments))}return e(o,r),s(o,[{key:"radius",value:function(t){return this.prop("r",i(t))}}]),o}(o.Element),o.Group.mixin({circle:function(){var t=arguments.length<=0||void 0===arguments[0]?50:arguments[0];return this.push(new o.Circle).radius(t)}}),o});
//# sourceMappingURL=draft.min.js.map
