/*draft.js v0.1.0 | http://draft.D1SC0te.ch | MIT license*/
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.draft=e()}(this,function(){"use strict";function t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function i(t){return null==t?t:t+"_u"}var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=function(){function t(t,e){var r=[],n=!0,i=!1,o=void 0;try{for(var s,u=t[Symbol.iterator]();!(n=(s=u.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(a){i=!0,o=a}finally{try{!n&&u["return"]&&u["return"]()}finally{if(i)throw o}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function a(t){return a.doc(t)};return u.types={},u.mixins={},u.inherit=function(t,e,r){var n=t.prototype=Object.create(e.prototype);n.constructor=t,(r||"undefined"==typeof r)&&(t._super=e.prototype)},u.mixin=function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t.prototype[r]=e[r])},u.proxy=function(t){var e=function n(t,e){if("string"==typeof e)return n(t,e.split("."));var r=e.shift();return e.length>0?n(t[r]||(t[r]={}),e):[t,r]},r={get:function(t,r){var n=e(t,r),i=s(n,2),o=i[0],u=i[1];return o[u]},set:function(t,r,n){var i=e(t,r),o=s(i,2),u=o[0],a=o[1];return u[a]=n,!0},deleteProperty:function(t,r){var n=e(t,r),i=s(n,2),o=i[0],u=i[1];return delete o[u],!0}};return"function"==typeof Proxy?new Proxy(t,r):t},u.defaults=u.proxy({get dpi(){var t=document.createElement("div");t.style.width="1in",t.style.padding=0,document.getElementsByTagName("body")[0].appendChild(t);var e=t.offsetWidth;return document.getElementsByTagName("body")[0].removeChild(t),e||96}}),u.types.unit=function(t){return t},u.px=function(t){t=String(t);var e=parseFloat(t,10),r=/^[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/g,n=null===r.exec(t)?!1:t.slice(r.lastIndex)||"px";switch(n){case"px":return e;case"pc":e*=12;case"pt":e/=72;break;case"km":e*=1e3;case"m":e*=10;case"dm":e*=10;case"cm":e*=10;case"mm":e/=25.4;break;case"mi":e*=1760;case"yd":e*=3;case"ft":e*=12;case"in":break;default:return}return e*u.defaults.dpi},u.types.color=function(t){var e=/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i,r="([01]?\\d\\d?|2[0-4]\\d|25[0-5])",n=new RegExp("^rgb\\("+r+"\\, ?"+r+"\\, ?"+r+"\\)$","i");return void 0===t||null===t||e.test(t)||n.test(t)?t:void 0},u.types.opacity=function(t){var e=/^(0(\.\d*)?|1(\.0*)?)$/;return void 0===t||null===t?t:e.test(t)?parseFloat(t,10):void 0},u.mixins.event={on:function(t,e){var r=this.getListeners(t,!0);for(var i in r){var o=r[i];-1===o.map(function(t){return t.listener}).indexOf(e)&&o.push("object"===("undefined"==typeof e?"undefined":n(e))?e:{listener:e,once:!1})}return this},once:function(t,e){return this.on(t,{listener:e,once:!0})},off:function(t,e){var r=this.getListeners(t,!0);for(var n in r){var i=r[n],o=i.map(function(t){return t.listener}).lastIndexOf(e);-1!==o&&i.splice(o,1)}return this},fire:function(t,e){Array.isArray(e)||(e=[e]);var r=this.getListeners(t,!0);for(var n in r)for(var i=r[n],o=i.length;o--;){var s=i[o],u=s.listener.apply({target:this,timeStamp:Date(),type:n},e);(s.once===!0||"off"===u)&&this.off(t,s.listener)}return this},defineEvent:function(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];var n=!0,i=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var a=s.value;this.getListeners(a)}}catch(f){i=!0,o=f}finally{try{!n&&u["return"]&&u["return"]()}finally{if(i)throw o}}return this},removeEvent:function(t){var e=this._getEvents();if("string"==typeof t)delete e[t];else if(t instanceof RegExp)for(var r in e)t.test(r)&&delete e[r];else delete this._events;return this},getListeners:function(t,e){var r=this._getEvents(),n={};if(t instanceof RegExp)for(var i in r)t.test(i)&&(n[i]=r[i]);else{var o=r[t]||(r[t]=[]);void 0===e?n=o:n[t]=o}return n},_getEvents:function(){return this._events||(this._events={})}},u.mixins.system={system:function(t){return this.prop("system",t)}},u.defaults.system="cartesian",u.mixins.units={units:function(t){return this.prop("units",t)}},u.defaults.units="px",u.mixins.position={position:function(t,e,r){return this.prop({x:i(t),y:i(e),z:i(r)})},pos:function(){return this.position.apply(this,arguments)},translate:function(t,e,r){return t=this.prop("x")+t||0,e=this.prop("y")+e||0,r=this.prop("z")+r||0,this.position(t,e,r)}},u.mixins.rotation={rotation:function(t,e,r){return this.prop({"α":t,"β":e,"γ":r})},rot:function(){return this.rotation.apply(this,arguments)},rotate:function(t,e,r){return t=this.prop("α")+t||0,e=this.prop("β")+e||0,r=this.prop("γ")+r||0,this.position(t,e,r)}},u.mixins.fill={fill:function(t){return this.fillColor(t)},fillColor:function(t){return this.prop("fill.color",u.types.color(t))},fillOpacity:function(t){return this.prop("fill.opacity",u.types.opacity(t))}},u.defaults["fill.color"]="#fff",u.defaults["fill.opacity"]=1,u.mixins.stroke={stroke:function(t){return this.strokeColor(t)},strokeColor:function(t){return this.prop("stroke.color",u.types.color(t))},strokeOpacity:function(t){return this.prop("stroke.opacity",u.types.opacity(t))},strokeWidth:function(t){return this.prop("stroke.width",u.types.unit(t))}},u.defaults["stroke.color"]="#000",u.defaults["stroke.opacity"]=1,u.defaults["stroke.width"]=1,u.mixins.size={size:function(t,e){return this.prop({width:i(t),height:i(e)})},width:function(t){return u.px(this.prop("width",i(t)))},height:function(t){return u.px(this.prop("height",i(t)))}},u.mixins.radius={rx:function(t){return this.prop("rx",i(t))},ry:function(t){return this.prop("ry",i(t))},radius:function(t,e){return this.prop({rx:i(t),ry:i(e)})}},u.Element=function(){function t(e){r(this,t),this._properties={},e&&this.prop("name",e);for(var n in u)if(this.constructor===u[n]){this._type=n.toLowerCase();break}}return o(t,[{key:"prop",value:function(t,e){var r=arguments.length<=2||void 0===arguments[2]?this._properties:arguments[2];if(void 0===t)return Object(this._properties);if(null===t)this._properties={};else if("string"==typeof t){var i=u.proxy(this._properties);if(void 0===e)return void 0===i[t]&&this.prop(t,u.defaults[t]||0),i[t];null===e?delete i[t]:(String(e).endsWith("_u")&&(e=e.slice(0,-2),e=isFinite(e)?e+this.parent.prop("units")||u.defaults.units:e),i[t]=e),this.fire("change",[t,e])}else if("object"==("undefined"==typeof t?"undefined":n(t))){var o=!1;for(var s in t)t[s]=this.prop(s,t[s],r),o=o||"object"==n(t[s]);return o?this:t}return this}},{key:"stringify",value:function(t){var e;return Array.isArray(t)?e=function(e,r){return-1===t.indexOf(e)?r:void 0}:t instanceof RegExp&&(e=function(e,r){return t.test(e)?void 0:r}),JSON.stringify(this,e,2)}},{key:"toJSON",value:function(){return{type:this.type,id:this.id,properties:this.prop(),children:this.children}}},{key:"type",get:function(){return this._type}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this.prop("name")}},{key:"domID",get:function(){for(var t=String(this.id);t.length<4;)t="0"+t;return this.type+"_"+t}}],[{key:"inherit",value:function(t,e){u.inherit(this,t,e)}},{key:"mixin",value:function(t){u.mixin(this,t)}},{key:"require",value:function(t){if("string"==typeof t)this.mixin(u.mixins[t]);else if(Array.isArray(t)){var e=!0,r=!1,n=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;this.require(s)}}catch(a){r=!0,n=a}finally{try{!e&&o["return"]&&o["return"]()}finally{if(r)throw n}}}}}]),t}(),u.Element.require(["event","position","rotation"]),u.Container=function(n){function i(e){r(this,i);var n=t(this,Object.getPrototypeOf(i).call(this,e));return n.children=[],n}return e(i,n),o(i,[{key:"add",value:function(t){t.parent=this,t.doc=this.doc||this;var e=t.type;return(t.doc.elements[e]||(t.doc.elements[e]=[])).push(t),t._id=t.doc.elements[e].length,this.children.push(t),this.fire("add",[t]),this}},{key:"push",value:function(t){return this.add(t),t}},{key:"remove",value:function(t){return this.fire("remove",[t]),this}},{key:"firstChild",get:function(){return this.children[0]}},{key:"lastChild",get:function(){return this.children[this.children.length-1]}}]),i}(u.Element),u.Doc=function(n){function i(e){r(this,i);var n=t(this,Object.getPrototypeOf(i).call(this,e));return n.elements={},n.prop({system:u.defaults.system,units:u.defaults.units}),n}return e(i,n),i}(u.Container),u.doc=function(t){var e=new u.Doc(t);return(u.docs||(u.docs=[])).push(e),e._id=u.docs.length,e},u.Group=function(n){function i(){return r(this,i),t(this,Object.getPrototypeOf(i).apply(this,arguments))}return e(i,n),i}(u.Container),u.Group.require(["system","units"]),u.Container.mixin({group:function(t){return this.push(new u.Group(t)).prop({system:this.prop("system"),units:this.prop("units")})}}),u.View=function(n){function i(){return r(this,i),t(this,Object.getPrototypeOf(i).apply(this,arguments))}return e(i,n),o(i,[{key:"aspectRatio",get:function(){var t=function e(t,r){return r?e(r,t%r):t};return t=t(this.width(),this.height()),this.width()/t+":"+this.height()/t}}]),i}(u.Element),u.View.require("size"),u.Group.mixin({view:function(t,e){return this.push(new u.View).size(t,e)}}),u.Line=function(n){function s(){return r(this,s),t(this,Object.getPrototypeOf(s).apply(this,arguments))}return e(s,n),o(s,[{key:"length",value:function(t){return this.prop("length",i(t))}}]),s}(u.Element),u.Line.require("stroke"),u.Group.mixin({line:function(t){return this.push(new u.Line).length(t)}}),u.Shape=function(n){function i(){return r(this,i),t(this,Object.getPrototypeOf(i).apply(this,arguments))}return e(i,n),i}(u.Element),u.Shape.require(["fill","stroke","size"]),u.Rect=function(n){function i(){return r(this,i),t(this,Object.getPrototypeOf(i).apply(this,arguments))}return e(i,n),o(i,[{key:"rekt",get:function(){return Math.floor(101*Math.random())+"% rekt"}}]),i}(u.Shape),u.Rect.require(["radius"]),u.Group.mixin({rect:function(){var t=arguments.length<=0||void 0===arguments[0]?100:arguments[0],e=arguments.length<=1||void 0===arguments[1]?100:arguments[1];return this.push(new u.Rect).size(t,e)}}),u.Circle=function(n){function s(){return r(this,s),t(this,Object.getPrototypeOf(s).apply(this,arguments))}return e(s,n),o(s,[{key:"radius",value:function(t){return this.prop("r",i(t))}}]),s}(u.Shape),u.Group.mixin({circle:function(){var t=arguments.length<=0||void 0===arguments[0]?50:arguments[0];return this.push(new u.Circle).radius(t)}}),u});
//# sourceMappingURL=draft.min.js.map
