{"version":3,"sources":["draft.js"],"names":["_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_classCallCheck","instance","Constructor","_typeof","obj","Symbol","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","root","factory","define","amd","document","module","exports","w","Draft","window","undefined","unit","val","testUnits","units","regex","String","RegExp","source","test","exec","slice","lastIndex","mixins","px","num","parseFloat","defaults","dpi","inherit","destination","addSuper","proto","_super","mixin","hasOwnProperty","system","createElement","style","width","padding","getElementsByTagName","appendChild","offsetWidth","removeChild","event","on","evt","listener","listenersMap","this","getListeners","listeners","map","l","includes","push","once","off","index","lastIndexOf","splice","fire","args","Array","isArray","response","apply","timeStamp","Date","type","defineEvent","arguments","removeEvent","events","_getEvents","_events","_system","prop","_units","position","x","y","z","pos","translate","rotation","α","β","γ","rot","rotate","size","_width","height","_height","radius","rx","_rx","ry","_ry","json","stringify","replacer","JSON","Element","dom","node","element","_properties","toLowerCase","_prop","setter","p","endsWith","isFinite","parent","CustomEvent","detail","bubbles","dispatchEvent","get","id","join","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","next","done","require","err","Container","_Draft$Element","name","_this","getPrototypeOf","children","child","doc","elements","Doc","_Draft$Container","_this2","Group","_Draft$Container2","group","add","View","_Draft$Element2","view","Page","_Draft$Group","page","Line","_Draft$Element3","_length","line","Rect","_Draft$Element4","Math","floor","random","rect","Circle","_Draft$Element5","r","circle"],"mappings":"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","file":"draft.min.js","sourcesContent":["/*\n* draft.js - A lightweight library for parametric design\n* version v0.0.0\n* https://github.com/D1SC0tech/draft.js\n*\n* copyright Jordi Pakey-Rodriguez <jordi.orlando@gmail.com>\n* license MIT\n*\n* BUILT: Thu Jan 14 2016 03:50:12 GMT-0600 (CST)\n*/\n(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(function() {\n      return factory(root, root.document);\n    });\n  } else if (typeof module === 'object' && module.exports) {\n    // Node. Does not work with strict CommonJS.\n    module.exports = root.document ? factory(root, root.document) :\n      function(w) {\n        return factory(w, w.document);\n      };\n  } else {\n    // Browser globals (root is window)\n    root.Draft = factory(root, root.document);\n  }\n}(typeof window !== \"undefined\" ? window : this, function(window, document) {\nvar Draft = {\n  mixins: {},\n\n  // TODO:50 test safety checks for Draft.px()\n  px(val) {\n    var num = parseFloat(val, 10);\n    var units = testUnits(val);\n\n    switch (units) {\n      // Remain unchanged if units are already px\n      case 'px':\n        return num;\n\n      // Points and picas (pt, pc)\n      case 'pc':\n        num *= 12;\n        // Falls through\n      case 'pt':\n        num /= 72;\n        break;\n\n      // Metric units (mm, cm, dm, m, km)\n      case 'km':\n        num *= 1000;\n        // Falls through\n      case 'm':\n        num *= 10;\n        // Falls through\n      case 'dm':\n        num *= 10;\n        // Falls through\n      case 'cm':\n        num *= 10;\n        // Falls through\n      case 'mm':\n        num /= 25.4;\n        break;\n\n      // Imperial units (in, ft, yd, mi)\n      case 'mi':\n        num *= 1760;\n        // Falls through\n      case 'yd':\n        num *= 3;\n        // Falls through\n      case 'ft':\n        num *= 12;\n        // Falls through\n      case 'in':\n        break;\n      default:\n        return undefined;\n    }\n\n    return num * Draft.defaults.dpi;\n  }\n};\n\n// These methods are adapted from Oliver Caldwell's Heir script, which he has\n// released under the Unlicense (public domain).\n// GitHub Repository: https://github.com/Olical/Heir\n\nDraft.inherit = function(destination, source, addSuper) {\n  var proto = destination.prototype = Object.create(source.prototype);\n  proto.constructor = destination;\n\n  if (addSuper || typeof addSuper === 'undefined') {\n    destination._super = source.prototype;\n  }\n};\n\nDraft.mixin = function(destination, source) {\n  for (var key in source) {\n    if (source.hasOwnProperty(key)) {\n      destination.prototype[key] = source[key];\n    }\n  }\n};\n\n// TODO: configurable defaults\nDraft.defaults = {\n  system: 'cartesian',\n  units: 'px',\n  /* width: 0,\n  length: 0,\n  r: 0, // radius\n  a: 0, // angle */\n\n  get dpi() {\n    var test = document.createElement('div');\n    test.style.width = '1in';\n    test.style.padding = 0;\n    document.getElementsByTagName('body')[0].appendChild(test);\n\n    var dpi = test.offsetWidth;\n\n    document.getElementsByTagName('body')[0].removeChild(test);\n\n    // Fall back to standard 96dpi resolution\n    return dpi || 96;\n  }\n  /* ,\n\n  // Cartesian coordinates\n  cartesian: {\n    layer: 1,\n    vars: [\n      'x',\n      'y',\n      'z'\n    ],\n    web: [\n      function(pos) {\n        return pos[0];\n      },\n      function(pos) {\n        return height - pos[1];\n      },\n      function(pos) {\n        return pos[2];\n      },\n      // Full position\n      function(pos) {\n        return [\n          pos[0],\n          height - pos[1],\n          pos[2]\n        ];\n      }\n    ],\n    polar: [\n      function(pos) {\n        return Math.sqrt(Math.pow(pos[0], 2) + Math.pow(pos[1], 2));\n      },\n      function(pos) {\n        return Math.atan2(pos[1], pos[0]);\n      },\n      function(pos) {\n        return pos[2];\n      },\n      // Full position\n      function(pos) {\n        return [\n          Math.sqrt(Math.pow(pos[0], 2) + Math.pow(pos[1], 2)),\n          Math.atan2(pos[1], pos[0]),\n          pos[2]\n        ];\n      }\n    ],\n    origin: {\n      x: 0,\n      y: 'height'\n    }\n  },\n\n  // Polar/Cylindrical coordinates\n  polar: {\n    layer: 2,\n    vars: [\n      'ρ',\n      'φ',\n      'z'\n    ],\n    cartesian: [\n      function(pos) {\n        return pos[0] * Math.cos(pos[1] * (Math.PI / 180));\n      },\n      function(pos) {\n        return pos[0] * Math.sin(pos[1] * (Math.PI / 180));\n      },\n      function(pos) {\n        return pos[2];\n      }\n    ],\n    origin: {\n      x: 'width/2',\n      y: 'height/2'\n    }\n  },\n\n  // Spherical coordinates\n  spherical: {\n    layer: 2,\n    vars: [\n      'ρ',\n      'φ',\n      'θ'\n    ]\n  } */\n};\n\n// TODO:10 create an actual 'Unit' class for every unit instance\nfunction unit(val) {\n  return val == null ? val : `${val}_u`;\n}\n\nfunction testUnits(val, units) {\n  var regex = /^[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?/g;\n  val = String(val);\n\n  if (typeof units == 'string') {\n    return new RegExp(`${regex.source}${units}$`, 'ig').test(val);\n  }\n\n  // TODO: don't default to px?\n  return regex.exec(val) === null ?\n    false : val.slice(regex.lastIndex) || 'px';\n}\n\n// BACKLOG: use Proxy to create a clean element tree (ignore all parent keys)\n\n// These methods are adapted from Oliver Caldwell's EventEmitter library, which\n// he has released under the Unlicense (public domain).\n// GitHub Repository: https://github.com/Olical/EventEmitter\n\n// TODO: implement bubbling?\n\nDraft.mixins.event = {\n  on(evt, listener) {\n    var listenersMap = this.getListeners(evt, true);\n\n    for (var key in listenersMap) {\n      var listeners = listenersMap[key];\n\n      if (!listeners.map(l => l.listener).includes(listener)) {\n        listeners.push(typeof listener === 'object' ? listener : {\n          listener: listener,\n          once: false\n        });\n      }\n    }\n\n    return this;\n  },\n\n  once(evt, listener) {\n    return this.on(evt, {\n      listener: listener,\n      once: true\n    });\n  },\n\n  off(evt, listener) {\n    var listenersMap = this.getListeners(evt, true);\n\n    for (var key in listenersMap) {\n      var listeners = listenersMap[key];\n      var index = listeners.map(l => l.listener).lastIndexOf(listener);\n\n      if (index !== -1) {\n        listeners.splice(index, 1);\n      }\n    }\n\n    return this;\n  },\n\n  fire(evt, args) {\n    // Put args in an array if it isn't already one\n    if (!Array.isArray(args)) {\n      args = [args];\n    }\n\n    var listenersMap = this.getListeners(evt, true);\n\n    for (var key in listenersMap) {\n      var listeners = listenersMap[key];\n      var i = listeners.length;\n\n      while (i--) {\n        /* console.info('event fired:', {\n          target: this,\n          timeStamp: new Date(),\n          type: key\n        }, args); */\n\n        var listener = listeners[i];\n        var response = listener.listener.apply({\n          target: this,\n          // TODO: Date.now() to prevent memory leaks?\n          timeStamp: new Date(),\n          type: key\n        }, args);\n\n        // If the listener returns 'off' then it gets removed from the event\n        if (listener.once === true || response === 'off') {\n          this.off(evt, listener.listener);\n        }\n      }\n    }\n\n    return this;\n  },\n\n  defineEvent() {\n    for (let i = 0; i < arguments.length; i++) {\n      this.getListeners(arguments[i]);\n    }\n\n    return this;\n  },\n\n  removeEvent(evt) {\n    var events = this._getEvents();\n\n    // Remove different things depending on the state of evt\n    if (typeof evt === 'string') {\n      // Remove all listeners for the specified event\n      delete events[evt];\n    } else if (evt instanceof RegExp) {\n      // Remove all events matching the regex.\n      for (var key in events) {\n        if (evt.test(key)) {\n          delete events[key];\n        }\n      }\n    } else {\n      // Remove all listeners in all events\n      delete this._events;\n    }\n\n    return this;\n  },\n\n  getListeners(evt, map) {\n    var events = this._getEvents();\n    var listeners = {};\n\n    // Return a concatenated array of all matching events if\n    // the selector is a regular expression.\n    if (evt instanceof RegExp) {\n      for (var key in events) {\n        if (evt.test(key)) {\n          listeners[key] = events[key];\n        }\n      }\n    } else {\n      var listener = events[evt] || (events[evt] = []);\n\n      if (map === undefined) {\n        listeners = listener;\n      } else {\n        listeners[evt] = listener;\n      }\n    }\n\n    /* if (map !== undefined) {\n      listeners = Object.keys(listeners).map(key => listeners[key]);\n    } */\n\n    return listeners;\n  },\n\n  /**\n   * Fetches the events object and creates one if required.\n   *\n   * @return {Object} The events storage object.\n   * @api private\n   */\n  _getEvents() {\n    return this._events || (this._events = {});\n  }\n};\n\nDraft.mixins.system = {\n  // Cartesian:\n  // - page.system('cartesian')\n  // - (x, y)\n  // - x is right, y is up, z is out of the page (right-hand)\n  // - global origin (0, 0) is at bottom-left\n  //\n  // Polar:\n  // - page.system('polar')\n  // - (r, φ)\n  // - φ is counter-clockwise, with 0 pointing to the right\n  // - global pole (0, 0) is at center\n  //\n  // BACKLOG:30 remove svg coordinates?\n  // Web/SVG:\n  // - page.system('web')\n  // - (x, y)\n  // - x is right, y is down, z is out of the page (left-hand)\n  // - global origin (0, 0) is at top-left\n\n  // BACKLOG:10 switch φ for θ?\n  // BACKLOG:0 Spherical (ρ, θ, φ), Cylindrical (ρ, φ, z)\n  system(system) {\n    /* if (this.prop('system') != system) {\n      // BACKLOG:20 recursively convert all elements to new system?\n    } */\n    return this.prop('system', system);\n  }\n};\n\nDraft.mixins.units = {\n  // Get/set the element's measurement units\n  units(units) {\n    return this.prop('units', units);\n  }\n};\n\nDraft.mixins.position = {\n  position(x, y, z) {\n    return this.prop({\n      x: unit(x),\n      y: unit(y),\n      z: unit(z)\n    });\n  },\n\n  pos(...args) {\n    return this.position(...args);\n  },\n\n  translate(x, y, z) {\n    x = this.prop('x') + x || 0;\n    y = this.prop('y') + y || 0;\n    z = this.prop('z') + z || 0;\n\n    return this.position(x, y, z);\n  }\n};\n\nDraft.mixins.rotation = {\n  rotation(α, β, γ) {\n    return this.prop({\n      α: α,\n      β: β,\n      γ: γ\n    });\n  },\n\n  rot(...args) {\n    return this.rotation(...args);\n  },\n\n  rotate(α, β, γ) {\n    α = this.prop('α') + α || 0;\n    β = this.prop('β') + β || 0;\n    γ = this.prop('γ') + γ || 0;\n\n    return this.position(α, β, γ);\n  }\n};\n\nDraft.mixins.size = {\n  // Get/set the element's width\n  width(width) {\n    return this.prop('width', unit(width));\n  },\n  // Get/set the element's height\n  height(height) {\n    return this.prop('height', unit(height));\n  },\n  // Get/set the element's width & height\n  size(width, height) {\n    return this.prop({\n      width: unit(width),\n      height: unit(height)\n    });\n  }\n};\n\nDraft.mixins.radius = {\n  // Get/set the element's x radius\n  rx(rx) {\n    return this.prop('rx', unit(rx));\n  },\n  // Get/set the element's y radius\n  ry(ry) {\n    return this.prop('ry', unit(ry));\n  },\n  // Get/set the element's radius\n  radius(rx, ry) {\n    return this.prop({\n      rx: unit(rx),\n      ry: unit(ry)\n    });\n  }\n};\n\nDraft.mixins.json = {\n  stringify(replacer) {\n    return JSON.stringify(this, replacer, 2);\n  }\n};\n\n// Draft.Element =\nDraft.Element = class Element {\n  constructor() {\n    // DOING:10 create DOM node\n    this.dom = {};\n    this.dom.node = document.createElement('object');\n    // Store a circular reference in the node\n    this.dom.node.element = this;\n\n    // Make sure this._properties is initialized\n    this._properties = {};\n\n    // HACK:0 need a better way of getting an element's type\n    for (var type in Draft) {\n      if (this.constructor === Draft[type]) {\n        this.prop('type', type.toLowerCase());\n        break;\n      }\n    }\n  }\n\n  static inherit(source, addSuper) {\n    Draft.inherit(this, source, addSuper);\n  }\n\n  static mixin(source) {\n    Draft.mixin(this, source);\n  }\n\n  // TODO:40 merge require() with mixin()?\n  static require(source) {\n    if (typeof source == 'string') {\n      this.mixin(Draft.mixins[source]);\n    } else if (Array.isArray(source)) {\n      for (var mixin of source) {\n        this.require(mixin);\n      }\n    }\n  }\n\n  get type() {\n    return this.prop('type');\n  }\n\n  get id() {\n    return this.prop('id');\n  }\n\n  // Construct a unique ID from the element's type and ID\n  get domID() {\n    var id = String(this.id);\n    while (id.length < 4) {\n      id = `0${id}`;\n    }\n\n    return [\n      'DraftJS',\n      this.type,\n      id\n    ].join('_');\n  }\n\n  prop(prop, val) {\n    if (prop === null) {\n      // BACKLOG: test deleting all properties, perhaps remove it\n      // Delete all properties if prop is null\n      this._properties = {};\n    } else if (prop === undefined) {\n      // Act as a full properties getter if prop is undefined\n      return new Object(this._properties);\n    } else if (typeof prop == 'object') {\n      // Act as a getter if prop is an object with only null values.\n      // Act as a setter if prop is an object with at least one non-null value.\n      let setter = false;\n\n      for (var p in prop) {\n        // Get this._properties[p] and save it to prop[p]\n        prop[p] = this.prop(p, prop[p]);\n        // If the returned value is an object, prop[p] is non-null, so act like\n        // a setter.\n        setter = setter || typeof prop[p] == 'object';\n      }\n\n      return setter ? this : prop;\n    } else if (val === null) {\n      // Delete the property if val is null\n      delete this._properties[prop];\n    } else if (val === undefined) {\n      // Act as an individual property getter if val is undefined\n\n      // TODO: don't return 0?\n      // If prop is undefined, set it to the default OR 0\n      return this._properties[prop] ||\n        (this._properties[prop] = Draft.defaults[prop] || 0);\n    } else {\n      // Act as an individual property setter if both prop and val are defined\n\n      // HACK:10 should use an actual unit data type, not just strings\n      if (String(val).endsWith('_u')) {\n        val = val.slice(0, -2);\n        val = isFinite(val) ?\n          val + this.parent.prop('units') || Draft.defaults.units : val;\n      }\n\n      this._properties[prop] = val;\n\n      var event = new CustomEvent('update', {\n        detail: {\n          type: this._properties.type,\n          prop: prop,\n          val: val\n        },\n        bubbles: true\n      });\n\n      this.dom.node.dispatchEvent(event);\n\n      this.fire('change', [prop, val]);\n      /* {\n        // target: this,\n        // type: this._properties.type,\n        prop: prop,\n        val: val\n      }); */\n    }\n\n    // prop() is chainable if 'this' is returned\n    return this;\n  }\n};\n\nDraft.Element.require([\n  'event',\n  'position',\n  'rotation'\n]);\n\nDraft.Container = class Container extends Draft.Element {\n  constructor(name) {\n    super();\n\n    // Set a name if given\n    this.prop('name', name || null);\n\n    // Initialize children array\n    this.children = [];\n  }\n\n  get name() {\n    return this.prop('name');\n  }\n\n  /* child(child) {\n    return this.children[child];\n  } */\n\n  push(child) {\n    // Add a reference to the child's parent and containing doc\n    child.parent = this;\n    child.doc = this.doc || this;\n\n    this.dom.node.appendChild(child.dom.node);\n\n    // Add the child to its type array\n    var type = child.type;\n    child.doc.elements[type] = child.doc.elements[type] || [];\n    child.doc.elements[type].push(child);\n    // Set the child's basic properties\n    child.prop('id', child.doc.elements[child.type].length);\n\n    // Add the child to the end of the children array\n    this.children.push(child);\n\n    return this;\n  }\n\n  add(child) {\n    this.push(child);\n    return child;\n  }\n};\n\nDraft.Doc = class Doc extends Draft.Container {\n  constructor(name) {\n    super(name);\n\n    // Initialize elements container\n    this.elements = {};\n\n    this.prop({\n      system: Draft.defaults.system,\n      units: Draft.defaults.units\n    });\n  }\n};\n\nDraft.doc = function(name) {\n  return new Draft.Doc(name);\n};\n\n/* Draft.mixin(Draft, {\n  doc(name) {\n    return new Draft.Doc(name);\n  }\n}); */\n\nDraft.Group = class Group extends Draft.Container {};\n\nDraft.Group.require([\n  'system',\n  'units'\n]);\n\n// TODO: mixin to Draft.group\nDraft.Container.mixin({\n  group() {\n    return this.add(new Draft.Group(name)).prop({\n      system: this.prop('system'),\n      units: this.prop('units')\n    });\n  }\n});\n\nDraft.View = class View extends Draft.Element {\n  /* render(renderer) {\n    this['render' + renderer.toUpperCase()]();\n  } */\n};\n\nDraft.View.require('size');\n\nDraft.Group.mixin({\n  view(width, height) {\n    return this.add(new Draft.View()).size(width, height);\n  }\n});\n\nDraft.Page = class Page extends Draft.Group {};\n\nDraft.Page.require('size');\n\nDraft.Doc.mixin({\n  page(name) {\n    return this.add(new Draft.Page(name)).prop({\n      system: this.prop('system'),\n      units: this.prop('units')\n    });\n  }\n});\n\nDraft.Line = class Line extends Draft.Element {\n  length(length) {\n    return this.prop('length', unit(length));\n  }\n};\n\nDraft.Group.mixin({\n  line(length) {\n    return this.add(new Draft.Line()).length(length);\n  }\n});\n\nDraft.Rect = class Rect extends Draft.Element {\n  get rekt() {\n    return `${Math.floor(Math.random() * 101)}% rekt`;\n  }\n};\n\nDraft.Rect.require([\n  'size',\n  'radius'\n]);\n\nDraft.Group.mixin({\n  rect(width, height) {\n    return this.add(new Draft.Rect()).size(width, height);\n  }\n});\n\nDraft.Circle = class Circle extends Draft.Element {\n  radius(r) {\n    return this.prop('r', unit(r));\n  }\n};\n\nDraft.Group.mixin({\n  circle(r) {\n    return this.add(new Draft.Circle()).radius(r);\n  }\n});\n\n  return Draft;\n}));"],"sourceRoot":"/source/"}