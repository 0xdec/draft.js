{"version":3,"sources":["draft.min.js","element.js"],"names":["global","factory","define","amd","exports","mod","draftMin","this","_possibleConstructorReturn","self","call","ReferenceError","_typeof","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_classCallCheck","instance","Constructor","obj","Symbol","zeroPad","number","length","str","elementType","element","type","Draft","toLowerCase","elementID","doc","elements","prop","unit","val","testUnits","units","regex","String","RegExp","source","test","exec","slice","lastIndex","_createClass","defineProperties","target","props","i","descriptor","defineProperty","key","protoProps","staticProps","undefined","mixins","domID","px","num","parseFloat","defaults","dpi","endsWith","inherit","destination","addSuper","proto","_super","mixin","hasOwnProperty","system","event","on","evt","listener","listenersMap","getListeners","listeners","map","l","lastIndexOf","push","once","off","index","splice","fire","args","Array","isArray","response","apply","timeStamp","Date","defineEvent","arguments","removeEvent","events","_getEvents","_events","_system","_units","position","x","y","z","pos","rotation","α","β","γ","rot","size","width","_width","height","_height","radius","rx","_rx","ry","_ry","json","stringify","replacer","JSON","Element","dom","node","document","createElement","_properties","_prop","p","setter","isFinite","parent","CustomEvent","detail","bubbles","dispatchEvent","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","next","done","require","err","Container","_Draft$Element","name","_this","getPrototypeOf","children","child","appendChild","Doc","_Draft$Container","_this2","Group","_Draft$Container2","group","add","Page","_Draft$Group","page","Line","_Draft$Element2","line","x1","y1","x2","y2","Rect","_Draft$Element3","get","Math","floor","random","rect","Circle","_Draft$Element4","r","circle"],"mappings":"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","file":"draft.min.js","sourcesContent":["'use strict';\n\n(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory();\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory();\n    global.draftMin = mod.exports;\n  }\n})(this, function () {\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return call && ((typeof call === 'undefined' ? 'undefined' : _typeof(call)) === \"object\" || typeof call === \"function\") ? call : self;\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === 'undefined' ? 'undefined' : _typeof(superClass)));\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var _createClass = (function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  })();\n\n  function _typeof(obj) {\n    return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj;\n  }\n\n  var Draft = undefined.Draft = {\n    mixins: {},\n    domID: function domID(element) {\n      return 'DraftJS_' + element.prop('type') + '_' + zeroPad(element.prop('id'), 4);\n    },\n    px: function px(val) {\n      var num = parseFloat(val, 10);\n      var units = testUnits(val);\n\n      if (units == 'px') {\n        return num;\n      } else if (units == 'pt') {\n        return Draft.px(num / 72 + 'in');\n      } else if (units == 'pc') {\n        return Draft.px(num * 12 + 'pt');\n      } else if (units == 'in') {\n        return num * defaults.dpi;\n      } else if (units == 'ft') {\n        return Draft.px(num * 12 + 'in');\n      } else if (units == 'yd') {\n        return Draft.px(num * 3 + 'ft');\n      } else if (units == 'mi') {\n        return Draft.px(num * 1760 + 'yd');\n      } else if (units.endsWith('m')) {\n        if (units == 'mm') {\n          num *= 1;\n        } else if (units == 'cm') {\n          num *= 10;\n        } else if (units == 'km') {\n          num *= 1000000;\n        }\n\n        return Draft.px(num / 25.4 + 'in');\n      } else {\n        return undefined;\n      }\n    }\n  };\n\n  Draft.inherit = function (destination, source, addSuper) {\n    var proto = destination.prototype = Object.create(source.prototype);\n    proto.constructor = destination;\n\n    if (addSuper || typeof addSuper === 'undefined') {\n      destination._super = source.prototype;\n    }\n  };\n\n  Draft.mixin = function (destination, source) {\n    for (var key in source) {\n      if (source.hasOwnProperty(key)) {\n        destination.prototype[key] = source[key];\n      }\n    }\n  };\n\n  var defaults = {\n    system: 'cartesian',\n    units: 'px',\n    dpi: 96\n  };\n\n  function zeroPad(number, length) {\n    var str = '' + number;\n\n    while (str.length < length) {\n      str = '0' + str;\n    }\n\n    return str;\n  }\n\n  function elementType(element) {\n    for (var type in Draft) {\n      if (element.constructor == Draft[type]) {\n        return type.toLowerCase();\n      }\n    }\n  }\n\n  function elementID(element) {\n    return element.doc.elements[element.prop('type')].length;\n  }\n\n  function unit(val) {\n    return val == null ? val : val + '_u';\n  }\n\n  function testUnits(val, units) {\n    var regex = /^[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?/g;\n    val = String(val);\n\n    if (typeof units == 'string') {\n      return new RegExp(regex.source + units + '$', 'ig').test(val);\n    } else {\n      return regex.exec(val) !== null ? val.slice(regex.lastIndex) || 'px' : false;\n    }\n  }\n\n  Draft.mixins.event = {\n    on: function on(evt, listener) {\n      var listenersMap = this.getListeners(evt, true);\n\n      for (var key in listenersMap) {\n        var listeners = listenersMap[key];\n\n        if (listeners.map(function (l) {\n          return l.listener;\n        }).lastIndexOf(listener) === -1) {\n          listeners.push((typeof listener === 'undefined' ? 'undefined' : _typeof(listener)) === 'object' ? listener : {\n            listener: listener,\n            once: false\n          });\n        }\n      }\n\n      return this;\n    },\n    once: function once(evt, listener) {\n      return this.on(evt, {\n        listener: listener,\n        once: true\n      });\n    },\n    off: function off(evt, listener) {\n      var listenersMap = this.getListeners(evt, true);\n\n      for (var key in listenersMap) {\n        var listeners = listenersMap[key];\n        var index = listeners.map(function (l) {\n          return l.listener;\n        }).lastIndexOf(listener);\n\n        if (index !== -1) {\n          listeners.splice(index, 1);\n        }\n      }\n\n      return this;\n    },\n    fire: function fire(evt, args) {\n      if (!Array.isArray(args)) {\n        args = [args];\n      }\n\n      var listenersMap = this.getListeners(evt, true);\n\n      for (var key in listenersMap) {\n        var listeners = listenersMap[key];\n        var i = listeners.length;\n\n        while (i--) {\n          var listener = listeners[i];\n          var response = listener.listener.apply({\n            target: this,\n            timeStamp: new Date(),\n            type: key\n          }, args);\n\n          if (listener.once === true || response === 'off') {\n            this.off(evt, listener.listener);\n          }\n        }\n      }\n\n      return this;\n    },\n    defineEvent: function defineEvent() {\n      for (var i = 0; i < arguments.length; i++) {\n        this.getListeners(arguments[i]);\n      }\n\n      return this;\n    },\n    removeEvent: function removeEvent(evt) {\n      var events = this._getEvents();\n\n      if (typeof evt === 'string') {\n        delete events[evt];\n      } else if (evt instanceof RegExp) {\n        for (var key in events) {\n          if (evt.test(key)) {\n            delete events[key];\n          }\n        }\n      } else {\n        delete this._events;\n      }\n\n      return this;\n    },\n    getListeners: function getListeners(evt, map) {\n      var events = this._getEvents();\n\n      var listeners = {};\n\n      if (evt instanceof RegExp) {\n        for (var key in events) {\n          if (evt.test(key)) {\n            listeners[key] = events[key];\n          }\n        }\n      } else {\n        var listener = events[evt] || (events[evt] = []);\n\n        if (map === undefined) {\n          listeners = listener;\n        } else {\n          listeners[evt] = listener;\n        }\n      }\n\n      return listeners;\n    },\n    _getEvents: function _getEvents() {\n      return this._events || (this._events = {});\n    }\n  };\n  Draft.mixins.system = {\n    system: function system(_system) {\n      return this.prop('system', _system);\n    }\n  };\n  Draft.mixins.units = {\n    units: function units(_units) {\n      return this.prop('units', _units);\n    }\n  };\n  Draft.mixins.position = {\n    position: function position(x, y, z) {\n      return this.prop({\n        x: unit(x),\n        y: unit(y),\n        z: unit(z)\n      });\n    },\n    pos: function pos() {\n      return this.position(arguments);\n    }\n  };\n  Draft.mixins.rotation = {\n    rotation: function rotation(α, β, γ) {\n      return this.prop({\n        α: α,\n        β: β,\n        γ: γ\n      });\n    },\n    rot: function rot() {\n      return this.rotation(arguments);\n    }\n  };\n  Draft.mixins.size = {\n    width: function width(_width) {\n      return this.prop('width', unit(_width));\n    },\n    height: function height(_height) {\n      return this.prop('height', unit(_height));\n    },\n    size: function size(width, height) {\n      return this.prop({\n        width: unit(width),\n        height: unit(height)\n      });\n    }\n  };\n  Draft.mixins.radius = {\n    rx: function rx(_rx) {\n      return this.prop('rx', unit(_rx));\n    },\n    ry: function ry(_ry) {\n      return this.prop('ry', unit(_ry));\n    },\n    radius: function radius(rx, ry) {\n      return this.prop({\n        rx: unit(rx),\n        ry: unit(ry)\n      });\n    }\n  };\n  Draft.mixins.json = {\n    stringify: function stringify(replacer) {\n      return JSON.stringify(this, replacer, 2);\n    }\n  };\n\n  Draft.Element = (function () {\n    function Element() {\n      _classCallCheck(this, Element);\n\n      this.dom = {};\n      this.dom.node = document.createElement('object');\n      this.dom.node.element = this;\n      this._properties = {};\n      this.prop('type', elementType(this));\n    }\n\n    _createClass(Element, [{\n      key: 'prop',\n      value: function prop(_prop, val) {\n        if (_prop === null) {\n          this._properties = {};\n        } else if (_prop === undefined) {\n          _prop = {};\n\n          for (var p in this._properties) {\n            _prop[p] = this._properties[p];\n          }\n\n          return _prop;\n        } else if ((typeof _prop === 'undefined' ? 'undefined' : _typeof(_prop)) == 'object') {\n          var setter = false;\n\n          for (var p in _prop) {\n            _prop[p] = this.prop(p, _prop[p]);\n            setter |= _typeof(_prop[p]) == 'object';\n          }\n\n          return setter ? this : _prop;\n        } else if (val === null) {\n          delete this._properties[_prop];\n        } else if (val === undefined) {\n          return this._properties[_prop] || this.prop(_prop, defaults[_prop] || 0);\n        } else {\n          if (String(val).endsWith('_u')) {\n            val = val.slice(0, -2);\n            val = isFinite(val) ? val + this.parent.prop('units') || defaults.units : val;\n          }\n\n          this._properties[_prop] = val;\n          var event = new CustomEvent('update', {\n            detail: {\n              type: this._properties.type,\n              prop: _prop,\n              val: val\n            },\n            bubbles: true\n          });\n          this.dom.node.dispatchEvent(event);\n          this.fire('change', [_prop, val]);\n        }\n\n        return this;\n      }\n    }], [{\n      key: 'inherit',\n      value: function inherit(source, addSuper) {\n        Draft.inherit(this, source, addSuper);\n      }\n    }, {\n      key: 'mixin',\n      value: function mixin(source) {\n        Draft.mixin(this, source);\n      }\n    }, {\n      key: 'require',\n      value: function require(source) {\n        if (typeof source == 'string') {\n          this.mixin(Draft.mixins[source]);\n        } else if (Array.isArray(source)) {\n          var _iteratorNormalCompletion = true;\n          var _didIteratorError = false;\n          var _iteratorError = undefined;\n\n          try {\n            for (var _iterator = source[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n              var mixin = _step.value;\n\n              this.require(mixin);\n            }\n          } catch (err) {\n            _didIteratorError = true;\n            _iteratorError = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion && _iterator.return) {\n                _iterator.return();\n              }\n            } finally {\n              if (_didIteratorError) {\n                throw _iteratorError;\n              }\n            }\n          }\n        }\n      }\n    }]);\n\n    return Element;\n  })();\n\n  Draft.Element.require(['event', 'position', 'rotation']);\n\n  Draft.Container = (function (_Draft$Element) {\n    _inherits(Container, _Draft$Element);\n\n    function Container(name) {\n      _classCallCheck(this, Container);\n\n      var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Container).call(this));\n\n      _this.prop('name', name || null);\n\n      _this.children = [];\n      return _this;\n    }\n\n    _createClass(Container, [{\n      key: 'push',\n      value: function push(child) {\n        child.parent = this;\n        child.doc = this.doc || this;\n        this.dom.node.appendChild(child.dom.node);\n        var type = child.prop('type');\n        child.doc.elements[type] = child.doc.elements[type] || [];\n        child.doc.elements[type].push(child);\n        child.prop('id', elementID(child));\n        this.children.push(child);\n        return this;\n      }\n    }, {\n      key: 'add',\n      value: function add(child) {\n        this.push(child);\n        return child;\n      }\n    }]);\n\n    return Container;\n  })(Draft.Element);\n\n  Draft.Doc = (function (_Draft$Container) {\n    _inherits(Doc, _Draft$Container);\n\n    function Doc(name) {\n      _classCallCheck(this, Doc);\n\n      var _this2 = _possibleConstructorReturn(this, Object.getPrototypeOf(Doc).call(this, name));\n\n      _this2.elements = {};\n\n      _this2.prop({\n        system: defaults.system,\n        units: defaults.units\n      });\n\n      return _this2;\n    }\n\n    return Doc;\n  })(Draft.Container);\n\n  Draft.doc = function (name) {\n    return new Draft.Doc(name);\n  };\n\n  Draft.Group = (function (_Draft$Container2) {\n    _inherits(Group, _Draft$Container2);\n\n    function Group() {\n      _classCallCheck(this, Group);\n\n      return _possibleConstructorReturn(this, Object.getPrototypeOf(Group).apply(this, arguments));\n    }\n\n    return Group;\n  })(Draft.Container);\n\n  Draft.Group.require(['system', 'units']);\n\n  Draft.Container.mixin({\n    group: function group() {\n      return this.add(new Draft.Group(name)).prop({\n        system: this.prop('system'),\n        units: this.prop('units')\n      });\n    }\n  });\n\n  Draft.Page = (function (_Draft$Group) {\n    _inherits(Page, _Draft$Group);\n\n    function Page() {\n      _classCallCheck(this, Page);\n\n      return _possibleConstructorReturn(this, Object.getPrototypeOf(Page).apply(this, arguments));\n    }\n\n    return Page;\n  })(Draft.Group);\n\n  Draft.Page.require('size');\n\n  Draft.Doc.mixin({\n    page: function page(name) {\n      return this.add(new Draft.Page(name)).prop({\n        system: this.prop('system'),\n        units: this.prop('units')\n      });\n    }\n  });\n\n  Draft.Line = (function (_Draft$Element2) {\n    _inherits(Line, _Draft$Element2);\n\n    function Line() {\n      _classCallCheck(this, Line);\n\n      return _possibleConstructorReturn(this, Object.getPrototypeOf(Line).apply(this, arguments));\n    }\n\n    return Line;\n  })(Draft.Element);\n\n  Draft.Container.mixin({\n    line: function line(x1, y1, x2, y2) {\n      return this.add(new Draft.Line());\n    }\n  });\n\n  Draft.Rect = (function (_Draft$Element3) {\n    _inherits(Rect, _Draft$Element3);\n\n    function Rect() {\n      _classCallCheck(this, Rect);\n\n      return _possibleConstructorReturn(this, Object.getPrototypeOf(Rect).apply(this, arguments));\n    }\n\n    _createClass(Rect, [{\n      key: 'rekt',\n      get: function get() {\n        return Math.floor(Math.random() * 101) + '% rekt';\n      }\n    }]);\n\n    return Rect;\n  })(Draft.Element);\n\n  Draft.Rect.require(['size', 'radius']);\n\n  Draft.Container.mixin({\n    rect: function rect(width, height) {\n      return this.add(new Draft.Rect()).size(width, height);\n    }\n  });\n\n  Draft.Circle = (function (_Draft$Element4) {\n    _inherits(Circle, _Draft$Element4);\n\n    function Circle() {\n      _classCallCheck(this, Circle);\n\n      return _possibleConstructorReturn(this, Object.getPrototypeOf(Circle).apply(this, arguments));\n    }\n\n    _createClass(Circle, [{\n      key: 'radius',\n      value: function radius(r) {\n        return this.prop('r', unit(r));\n      }\n    }]);\n\n    return Circle;\n  })(Draft.Element);\n\n  Draft.Container.mixin({\n    circle: function circle(r) {\n      return this.add(new Draft.Circle()).radius(r);\n    }\n  });\n});","// Draft.Element =\nDraft.Element = class Element {\n  constructor() {\n    // DOING:10 create DOM node\n    this.dom = {};\n    this.dom.node = document.createElement('object');\n    // Store a circular reference in the node\n    this.dom.node.element = this;\n\n    // Make sure this._properties is initialized\n    this._properties = {};\n    this.prop('type', elementType(this));\n  }\n\n  static inherit(source, addSuper) {\n    Draft.inherit(this, source, addSuper);\n  }\n\n  static mixin(source) {\n    Draft.mixin(this, source);\n  }\n\n  // TODO:40 merge require() with mixin()?\n  static require(source) {\n    if (typeof source == 'string') {\n      this.mixin(Draft.mixins[source]);\n    } else if (Array.isArray(source)) {\n      for (var mixin of source) {\n        this.require(mixin);\n      }\n    }\n  }\n\n  prop(prop, val) {\n    // BACKLOG: test deleting all properties, perhaps remove it\n    // Delete all properties if prop is null\n    if (prop === null) {\n      this._properties = {};\n    }\n    // Act as a full properties getter if prop is undefined\n    else if (prop === undefined) {\n      prop = {};\n\n      for (let p in this._properties) {\n        prop[p] = this._properties[p];\n      }\n\n      return prop;\n    }\n    // Act as a getter if prop is an object with only null values.\n    // Act as a setter if prop is an object with at least one non-null value.\n    else if (typeof prop == 'object') {\n      let setter = false;\n\n      for (let p in prop) {\n        // Get this._properties[p] and save it to prop[p]\n        prop[p] = this.prop(p, prop[p]);\n        // If the returned value is an object, prop[p] is non-null, so act like\n        // a setter.\n        setter |= typeof prop[p] == 'object';\n      }\n\n      return setter ? this : prop;\n    }\n    // Delete the property if val is null\n    else if (val === null) {\n      delete this._properties[prop];\n    }\n    // Act as an individual property getter if val is undefined\n    else if (val === undefined) {\n      /*val = this._properties[prop];\n      return val === undefined ? defaults[prop] || 0 : val;*/\n\n      // FIXME: don't return 0\n      // If prop is undefined, set it to the default OR 0\n      return this._properties[prop] ||\n        this.prop(prop, defaults[prop] || 0);\n    }\n    // Act as an individual property setter if both prop and val are defined\n    else {\n      // HACK:10 should use an actual unit data type, not just strings\n      if (String(val).endsWith('_u')) {\n        val = val.slice(0, -2);\n        val = isFinite(val) ?\n          val + this.parent.prop('units') || defaults.units : val;\n      }\n\n      this._properties[prop] = val;\n\n      var event = new CustomEvent('update', {\n        detail: {\n          type: this._properties.type,\n          prop: prop,\n          val: val\n        },\n        bubbles: true\n      });\n\n      this.dom.node.dispatchEvent(event);\n\n      this.fire('change', [prop, val]); /*{\n        // target: this,\n        // type: this._properties.type,\n        prop: prop,\n        val: val\n      });*/\n    }\n\n    // prop() is chainable if 'this' is returned\n    return this;\n  }\n};\n\nDraft.Element.require([\n  'event',\n  'position',\n  'rotation'\n]);\n"],"sourceRoot":"/source/"}