{"version":3,"sources":["draft.js"],"names":["_typeof","obj","Symbol","constructor","root","factory","define","amd","document","module","exports","w","Draft","window","undefined","zeroPad","number","length","str","elementDoc","element","elementType","parent","e","toLowerCase","elementID","elements","updateDOM","dom","treeView","updateTreeView","this","Doc","id","extend","methods","method","prototype","forEach","create","config","construct","name","prop","inherit","Object","require","init","Container","domID","properties","type","defaults","system","units","cartesian","layer","vars","web","pos","height","polar","Math","sqrt","pow","atan2","origin","x","y","cos","PI","sin","spherical","json","stringify","replacer","JSON","_system","_units","size","width","_width","_height","_x","apply","arguments","toString","move","i","radius","rx","_rx","ry","_ry","transform","k","transforms","translate","scale","cx","cy","rotate","a","skew","ax","ay","Element","_prop","val","p","setter","child","_child","children","push","doc","add","getElementById","Group","group","Page","origin.x","origin.y","page","Line","line","x1","y1","x2","y2","Rect","getRekt","rect","Circle","r","circle"],"mappings":"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","file":"draft.min.js","sourcesContent":["/*\n* draft.js - A lightweight library for parametric design\n* version v0.0.0\n* draft.D1SC0te.ch\n*\n* copyright Jordi Orlando <jordi.orlando@gmail.com>\n* license GPL-3.0\n*\n* BUILT: Mon Jan 04 2016 23:39:06 GMT-0600 (CST)\n*/\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define(function () {\n      return factory(root, root.document);\n    });\n  } else if (typeof module === 'object' && module.exports) {\n    // Node. Does not work with strict CommonJS.\n    module.exports = root.document ? factory(root, root.document) :\n      function (w) {\n        return factory(w, w.document);\n      };\n  } else {\n    // Browser globals (root is window)\n    root.Draft = factory(root, root.document);\n  }\n}(typeof window !== \"undefined\" ? window : this, function (window, document) {\nvar Draft = this.Draft = function (element) {\n  return new Draft.Doc(element);\n};\n\n// TODO: separate ID counters for each type of element\nDraft.id = 0;\n// TODO: separate array containers for each type of element\n// Draft.pages = [];\n\n// This function takes an existing element and copies the supplied methods to it\nDraft.extend = function (element, methods) {\n  for (var method in methods) {\n    // If method is a function, copy it\n    if (typeof methods[method] === 'function') {\n      element.prototype[method] = methods[method];\n    }\n    // If method is an array, call Draft.extend for each element of the array\n    else if (method == 'require') {\n      methods[method].forEach(function (e) {\n        Draft.extend(element, e);\n      });\n    }\n  }\n\n  return methods;\n};\n\n// This function creates a new element class from a configuration object\nDraft.create = function (config) {\n  var element = typeof config.construct == 'function' ?\n    config.construct :\n    function (name) {\n      // TODO: change this?\n      this.prop({\n        name: name || null\n      });\n      // this.constructor.call(this);\n    };\n\n  // Inherit the prototype\n  if (config.inherit) {\n    element.prototype = Object.create(config.inherit.prototype);\n    element.prototype.constructor = element;\n  }\n\n  // var methods = {};\n\n  // Attach all required methods\n  if (config.require) {\n    config.require.forEach(function (e) {\n      Draft.extend(element, e);\n    });\n  }\n\n  // Attach all new methods\n  if (config.methods) {\n    Draft.extend(element, config.methods);\n  }\n\n  // Attach the initialization method to the parent\n  if (config.init) {\n    Draft.extend(config.parent || Draft.Container, config.init);\n  }\n\n  // Construct a unique ID from the element's type and ID\n  Draft.domID = function (element) {\n    return 'DraftJS_' +\n      element.properties.type + '_' +\n      zeroPad(element.properties.id, 4);\n  };\n\n  return element;\n};\n\nDraft.defaults = {\n  system: 'cartesian',\n  units: 'px',\n  /*width: 0,\n  length: 0,\n  r: 0, // radius\n  a: 0, // angle*/\n\n  // Cartesian coordinates\n  cartesian: {\n    layer: 1,\n    vars: [\n      'x',\n      'y',\n      'z'\n    ],\n    web: [\n      function (pos) {\n        return pos[0];\n      },\n      function (pos) {\n        return height - pos[1];\n      },\n      function (pos) {\n        return pos[2];\n      },\n      // Full position\n      function (pos) {\n        return [\n          pos[0],\n          height - pos[1],\n          pos[2]\n        ];\n      }\n    ],\n    polar: [\n      function (pos) {\n        return Math.sqrt(Math.pow(pos[0], 2) + Math.pow(pos[1], 2));\n      },\n      function (pos) {\n        return Math.atan2(pos[1], pos[0]);\n      },\n      function (pos) {\n        return pos[2];\n      },\n      // Full position\n      function (pos) {\n        return [\n          Math.sqrt(Math.pow(pos[0], 2) + Math.pow(pos[1], 2)),\n          Math.atan2(pos[1], pos[0]),\n          pos[2]\n        ];\n      }\n    ],\n    origin: {\n      x: 0,\n      y: 'height'\n    }\n  },\n\n  // Polar/Cylindrical coordinates\n  polar: {\n    layer: 2,\n    vars: [\n      'rho',\n      'phi',\n      'z'\n    ],\n    cartesian: [\n      function (pos) {\n        return pos[0] * Math.cos(pos[1] * (Math.PI / 180));\n      },\n      function (pos) {\n        return pos[0] * Math.sin(pos[1] * (Math.PI / 180));\n      },\n      function (pos) {\n        return pos[2];\n      }\n    ],\n    origin: {\n      x: 'width/2',\n      y: 'height/2'\n    }\n  },\n\n  // Spherical coordinates\n  spherical: {\n    layer: 2,\n    vars: [\n      'rho',\n      'phi',\n      'theta'\n    ]\n  }\n};\n\n// Pad a number with zeroes until the number of digits is equal to length\nfunction zeroPad(number, length) {\n  var str = '' + number;\n  while (str.length < length) {\n      str = '0' + str;\n  }\n\n  return str;\n}\n\n// Get the parent doc of an element\nfunction elementDoc(element) {\n  return elementType(element.parent) == 'doc' ?\n    element.parent : elementDoc(element.parent);\n}\n\n// Get the type of an element\nfunction elementType(element) {\n  for (var e in Draft) {\n    if (element.constructor == Draft[e]) {\n      return e.toLowerCase();\n    }\n  }\n}\n\n// Get a unique ID based on the number of instances of a type of element\nfunction elementID(element) {\n  return elementDoc(element).elements[elementType(element)].length;\n}\n\nfunction updateDOM(element) {\n  if (element.dom && element.dom.treeView) {\n    element.updateTreeView();\n  }\n  if (element.parent) {\n    updateDOM(element.parent);\n  }\n}\n\nDraft.json = {\n  stringify: function (replacer) {\n    return JSON.stringify(this, replacer, 2);\n  }\n};\n\nDraft.system = {\n  // Cartesian:\n  // - page.system('cartesian')\n  // - (x, y)\n  // - x is right, y is up, z is out of the page (right-hand)\n  // - global origin (0, 0) is at bottom-left\n  //\n  // Polar:\n  // - page.system('polar')\n  // - (r, phi)\n  // - phi is counter-clockwise, with 0 pointing to the right\n  // - global pole (0, 0) is at center\n  //\n  // TODO: remove this?\n  // Web/SVG:\n  // - page.system('web')\n  // - (x, y)\n  // - x is right, y is down, z is out of the page (left-hand)\n  // - global origin (0, 0) is at top-left\n\n  // TODO: switch phi for theta?\n  // TODO: Spherical (p, theta, phi), Cylindrical (p, phi, z)\n  system: function (system) {\n    /*if (this.prop('system') != system) {\n      // TODO: recursively convert all elements to new system?\n    }*/\n    return this.prop('system', system);\n  }\n};\n\nDraft.units = {\n  // Get/set the element's measurement units\n  units: function (units) {\n    return this.prop('units', units);\n  }\n};\n\nDraft.size = {\n  // Get/set the element's width\n  width: function (width) {\n    return this.prop('width', width);\n  },\n  // Get/set the element's height\n  height: function (height) {\n    return this.prop('height', height);\n  },\n  // Get/set the element's width & height\n  size: function (width, height) {\n    return this.prop({\n      width: width,\n      height: height\n    });\n  }\n};\n\nDraft.move = {\n  /*// Get/set the element's x position\n  x: function (x) {\n    return this.prop('x', x);\n  },\n\n  // Get/set the element's y position\n  y: function (y) {\n    return this.prop('y', y);\n  },*/\n\n  // Get/set the element's position\n  move: function () {\n    var pos = {};\n    for (var i = 0; i < arguments.length; i++) {\n      pos[Draft.defaults[this.prop('system')].vars[i]] = arguments[i];\n    }\n    return this.prop(pos);\n  }\n};\n\nDraft.radius = {\n  // Get/set the element's x radius\n  rx: function (rx) {\n    return this.prop('rx', rx);\n  },\n  // Get/set the element's y radius\n  ry: function (ry) {\n    return this.prop('ry', ry);\n  },\n  // Get/set the element's radius\n  radius: function (rx, ry) {\n    return this.prop({\n      rx: rx,\n      ry: ry\n    });\n  }\n};\n\nDraft.transform = {\n  transform: function (obj) {\n    // TODO: make this work with actual transformation matrices\n    for (var k in obj) {\n      obj[k] = obj[k] == null ?\n        obj[k] : this.prop(k) + obj[k];\n    }\n\n    return this.prop(obj);\n  }\n};\n\nDraft.transforms = {\n  require: [\n    Draft.transform\n  ],\n  // Translate the element relative to its current position\n  translate: function (x, y) {\n    return this.transform({\n      x: x,\n      y: y\n    });\n  },\n  // Scale the element relative to its current size\n  scale: function (x, y, cx, cy) {\n    /*return this.transform({\n      x: x,\n      y: y,\n      cx: cx,\n      cy: cy\n    });*/\n  },\n  // Rotate the element relative to its current angle\n  rotate: function (a, cx, cy) {\n    /*return this.transform({\n      a: a,\n      cx: cx,\n      cy: cy\n    });*/\n  },\n  // Skew the element relative to its current skew\n  skew: function (ax, ay, cx, cy) {\n    /*return this.transform({\n      ax: ax,\n      ay: ay,\n      cx: cx,\n      cy: cy\n    });*/\n  }\n};\n\nDraft.Element = Draft.create({\n  require: [\n    Draft.size,\n    Draft.move\n  ],\n\n  methods: {\n    prop: function (prop, val) {\n      // Make sure this.properties is initialized\n      this.properties = this.properties || {};\n\n      // Act as a full properties getter if prop is null/undefined\n      if (prop == null) {\n        prop = {};\n\n        for (let p in this.properties) {\n          prop[p] = this.properties[p];\n        }\n\n        return prop;\n      }\n      // Act as a getter if prop is an object with only null values.\n      // Act as a setter if prop is an object with at least one non-null value.\n      else if (typeof prop === 'object') {\n        let setter = false;\n\n        for (let p in prop) {\n          // Get this.properties[p] and save it to prop[p]\n          prop[p] = this.prop(p, prop[p]);\n          // If the returned value is an object, prop[p] is non-null, so act like\n          // a setter.\n          setter |= typeof prop[p] === 'object';\n        }\n\n        return setter ? this : prop;\n      }\n      // Delete the property if val is null\n      else if (val === null) {\n        delete this.properties[prop];\n      }\n      // Act as an individual property getter if val is undefined\n      else if (val === undefined) {\n        /*val = this.properties[prop];\n        return val === undefined ? Draft.defaults[prop] || 0 : val;*/\n\n        // If prop is undefined, set it to the default OR 0\n        return this.properties[prop] ||\n          this.prop(prop, Draft.defaults[prop] || 0);\n      }\n      // Act as an individual property setter if both prop and val are defined\n      else {\n        this.properties[prop] = val;\n      }\n\n      updateDOM(this);\n\n      // prop() is chainable if 'this' is returned\n      return this;\n    },\n\n    parent: function () {\n      return this.parent;\n    }\n  }\n});\n\nDraft.Container = Draft.create({\n  inherit: Draft.Element,\n\n  methods: {\n    parent: function () {\n      return this.parent;\n    },\n    child: function (child) {\n      return this.children[child];\n    },\n    push: function (element) {\n      // Add a reference to the element's parent\n      element.parent = this;\n\n      // Initialize children array and add the element to the end\n      this.children = this.children || [];\n      this.children.push(element);\n\n      // Add the element to its type array\n      var doc = elementDoc(element);\n      var type = elementType(element);\n      doc.elements = doc.elements || {};\n      doc.elements[type] = doc.elements[type] || [];\n      doc.elements[type].push(element);\n\n      // Set the element's basic properties\n      element.prop({\n        type: type,\n        id: elementID(element)\n      });\n\n      return element;\n    },\n    // FIXME: figure out why this only updates the tree view when saved to a var\n    add: function (element) {\n      return this.push(element);\n    }\n  }\n});\n\nDraft.Doc = Draft.create({\n  construct: function (element) {\n    if (element) {\n      // Ensure the presence of a DOM element\n      this.dom = typeof element == 'string' ?\n        document.getElementById(element) :\n        element;\n    }\n  },\n\n  inherit: Draft.Container\n\n  /*methods: {\n    docs: function () {\n      return this.node.docs;\n    }\n  }*/\n\n  /*init: {\n    doc: function (element, name) {\n      if (element) {\n        // Ensure the presence of a DOM element\n        element = typeof element == 'string' ?\n          document.getElementById(element) :\n          element;\n\n        var doc = new Draft.Doc(name);\n\n        // this.node = {};\n        doc.children = [];\n        doc.dom = element;\n\n        return doc;\n      }\n\n      // this.constructor.call(this, element);\n    }\n  }*/\n});\n\nDraft.Group = Draft.create({\n  inherit: Draft.Container,\n\n  require: [\n    Draft.system,\n    Draft.units\n  ],\n\n  init: {\n    group: function (name) {\n      // TODO: move this .prop call somewhere else?\n      return this.add(new Draft.Group(name)).prop({\n        system: this.system(),\n        units: this.units()\n      }).move(0, 0);\n    }\n  }\n});\n\nDraft.Page = Draft.create({\n  inherit: Draft.Group,\n\n  methods: {\n    // Set the page's origin relative to its (0, 0) position\n    // TODO: remove this?\n    origin: function (x, y) {\n      return this.prop({\n        'origin.x': x,\n        'origin.y': y\n      });\n    }\n  },\n\n  init: {\n    page: function (name) {\n      // TODO: move this .prop call somewhere else?\n      return this.add(new Draft.Page(name)).prop({\n        system: Draft.defaults.system,\n        units: Draft.defaults.units\n      });\n\n      // Draft.pages.push(page);\n    }\n  },\n\n  parent: Draft.Doc\n});\n\nDraft.Line = Draft.create({\n  inherit: Draft.Element,\n\n  init: {\n    line: function (x1, y1, x2, y2) {\n      return this.add(new Draft.Line());\n    }\n  }\n});\n\nDraft.Rect = Draft.create({\n  inherit: Draft.Element,\n\n  require: [\n    Draft.radius\n  ],\n\n  methods: {\n    // in the butt\n    getRekt: function () {\n      return this.prop();\n    }\n  },\n\n  init: {\n    rect: function (width, height) {\n      return this.add(new Draft.Rect()).size(width, height);\n    }\n  }\n});\n\nDraft.Circle = Draft.create({\n  inherit: Draft.Element,\n\n  /*require: [\n    Draft.radius\n  ],*/\n\n  methods: {\n    radius: function (r) {\n      return this.prop('r', r);\n    }\n  },\n\n  init: {\n    circle: function (r) {\n      return this.add(new Draft.Circle()).radius(r);\n    }\n  }\n});\n\n  return Draft;\n}));"],"sourceRoot":"/source/"}