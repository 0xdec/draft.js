{"version":3,"sources":["draft.min.js","draft.js"],"names":["_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","_classCallCheck","instance","Constructor","_typeof","obj","Symbol","_createClass","defineProperties","target","props","i","length","descriptor","defineProperty","key","protoProps","staticProps","root","factory","define","amd","exports","module","draft","undefined","unit","val","name","doc","defaults","system","units","dpi","test","document","createElement","style","width","padding","getElementsByTagName","appendChild","offsetWidth","removeChild","mixins","px","String","num","parseFloat","regex","exec","slice","lastIndex","inherit","destination","source","addSuper","proto","_super","mixin","hasOwnProperty","event","on","evt","listener","listenersMap","this","getListeners","listeners","map","l","includes","push","once","off","index","lastIndexOf","splice","fire","args","Array","isArray","response","apply","timeStamp","Date","type","defineEvent","_len","arguments","evts","_key","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","next","done","err","removeEvent","events","_getEvents","RegExp","_events","_system","prop","_units","position","x","y","z","pos","translate","rotation","α","β","γ","rot","rotate","size","height","_width","_height","radius","rx","_rx","ry","_ry","Element","_properties","_type","toLowerCase","_prop","setter","p","endsWith","isFinite","parent","blacklist","replacer","JSON","stringify","id","properties","children","get","_id","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","require","Container","_draft$Element","_this","getPrototypeOf","child","elements","add","Doc","_draft$Container","_this2","docs","Group","_draft$Container2","group","View","_draft$Element2","_gcd","a","b","view","Line","_draft$Element3","_length","line","Rect","_draft$Element4","Math","floor","random","rect","Circle","_draft$Element5","r","circle"],"mappings":"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","file":"draft.min.js","sourcesContent":[null,"/*\n* draft.js - A lightweight library for parametric design\n* version v0.0.2\n* http://draft.D1SC0te.ch\n*\n* copyright Jordi Pakey-Rodriguez <jordi.orlando@hexa.io>\n* license MIT\n*\n* BUILT: Thu Jan 21 2016 16:42:56 GMT-0600 (CST)\n*/\n;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.draft = factory();\n  }\n}(this, function() {\nvar draft = function(name) {\n  return draft.doc(name);\n};\n\n// TODO: configurable defaults\ndraft.defaults = {\n  system: 'cartesian',\n  units: 'px',\n  get dpi() {\n    var test = document.createElement('div');\n    test.style.width = '1in';\n    test.style.padding = 0;\n    document.getElementsByTagName('body')[0].appendChild(test);\n\n    var dpi = test.offsetWidth;\n\n    document.getElementsByTagName('body')[0].removeChild(test);\n\n    // Fall back to standard 96dpi resolution\n    return dpi || 96;\n  }\n};\n\ndraft.mixins = {};\n\n// TODO:50 test safety checks for draft.px()\ndraft.px = function(val) {\n  val = String(val);\n  var num = parseFloat(val, 10);\n\n  var regex = /^[-+]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?/g;\n\n  /* if (typeof units == 'string') {\n    return new RegExp(`${regex.source}${units}$`, 'ig').test(val);\n  } */\n\n  // TODO: don't default to px?\n  var units = regex.exec(val) === null ?\n    false : val.slice(regex.lastIndex) || 'px';\n\n  switch (units) {\n    // Remain unchanged if units are already px\n    case 'px':\n      return num;\n\n    // Points and picas (pt, pc)\n    case 'pc':\n      num *= 12;\n      // Falls through\n    case 'pt':\n      num /= 72;\n      break;\n\n    // Metric units (mm, cm, dm, m, km)\n    case 'km':\n      num *= 1000;\n      // Falls through\n    case 'm':\n      num *= 10;\n      // Falls through\n    case 'dm':\n      num *= 10;\n      // Falls through\n    case 'cm':\n      num *= 10;\n      // Falls through\n    case 'mm':\n      num /= 25.4;\n      break;\n\n    // Imperial units (in, ft, yd, mi)\n    case 'mi':\n      num *= 1760;\n      // Falls through\n    case 'yd':\n      num *= 3;\n      // Falls through\n    case 'ft':\n      num *= 12;\n      // Falls through\n    case 'in':\n      break;\n    default:\n      return undefined;\n  }\n\n  return num * draft.defaults.dpi;\n};\n\n// DOING:10 create an actual 'Unit' class for every unit instance\nfunction unit(val) {\n  return val == null ? val : `${val}_u`;\n}\n\n// These methods are adapted from Oliver Caldwell's Heir script, which he has\n// released under the Unlicense (public domain).\n// GitHub Repository: https://github.com/Olical/Heir\n\ndraft.inherit = function(destination, source, addSuper) {\n  var proto = destination.prototype = Object.create(source.prototype);\n  proto.constructor = destination;\n\n  if (addSuper || typeof addSuper === 'undefined') {\n    destination._super = source.prototype;\n  }\n};\n\ndraft.mixin = function(destination, source) {\n  for (var key in source) {\n    if (source.hasOwnProperty(key)) {\n      destination.prototype[key] = source[key];\n    }\n  }\n};\n\n// These methods are adapted from Oliver Caldwell's EventEmitter library, which\n// he has released under the Unlicense (public domain).\n// GitHub Repository: https://github.com/Olical/EventEmitter\n\n// BACKLOG: implement bubbling?\n\ndraft.mixins.event = {\n  on(evt, listener) {\n    var listenersMap = this.getListeners(evt, true);\n\n    for (var key in listenersMap) {\n      var listeners = listenersMap[key];\n\n      if (!listeners.map(l => l.listener).includes(listener)) {\n        listeners.push(typeof listener === 'object' ? listener : {\n          listener: listener,\n          once: false\n        });\n      }\n    }\n\n    return this;\n  },\n\n  once(evt, listener) {\n    return this.on(evt, {\n      listener: listener,\n      once: true\n    });\n  },\n\n  off(evt, listener) {\n    var listenersMap = this.getListeners(evt, true);\n\n    for (var key in listenersMap) {\n      var listeners = listenersMap[key];\n      var index = listeners.map(l => l.listener).lastIndexOf(listener);\n\n      if (index !== -1) {\n        listeners.splice(index, 1);\n      }\n    }\n\n    return this;\n  },\n\n  // TODO: use rest for args (...args)\n  fire(evt, args) {\n    // Put args in an array if it isn't already one\n    if (!Array.isArray(args)) {\n      args = [args];\n    }\n\n    var listenersMap = this.getListeners(evt, true);\n\n    for (var key in listenersMap) {\n      var listeners = listenersMap[key];\n      var i = listeners.length;\n\n      /* if (i > 0) {\n        console.info(`${this.domID} ${key}:`, args);\n      } */\n\n      while (i--) {\n        var listener = listeners[i];\n        var response = listener.listener.apply({\n          target: this,\n          // TODO: Date.now() to prevent memory leaks?\n          timeStamp: Date(),\n          type: key\n        }, args);\n\n        // If the listener returns 'off' then it gets removed from the event\n        if (listener.once === true || response === 'off') {\n          this.off(evt, listener.listener);\n        }\n      }\n    }\n\n    return this;\n  },\n\n  defineEvent(...evts) {\n    for (var evt of evts) {\n      this.getListeners(evt);\n    }\n\n    return this;\n  },\n\n  removeEvent(evt) {\n    var events = this._getEvents();\n\n    // Remove different things depending on the state of evt\n    if (typeof evt === 'string') {\n      // Remove all listeners for the specified event\n      delete events[evt];\n    } else if (evt instanceof RegExp) {\n      // Remove all events matching the regex.\n      for (var key in events) {\n        if (evt.test(key)) {\n          delete events[key];\n        }\n      }\n    } else {\n      // Remove all listeners in all events\n      delete this._events;\n    }\n\n    return this;\n  },\n\n  getListeners(evt, map) {\n    var events = this._getEvents();\n    var listeners = {};\n\n    // Return a concatenated array of all matching events if\n    // the selector is a regular expression.\n    if (evt instanceof RegExp) {\n      for (var key in events) {\n        if (evt.test(key)) {\n          listeners[key] = events[key];\n        }\n      }\n    } else {\n      var listener = events[evt] || (events[evt] = []);\n\n      if (map === undefined) {\n        listeners = listener;\n      } else {\n        listeners[evt] = listener;\n      }\n    }\n\n    /* if (map !== undefined) {\n      listeners = Object.keys(listeners).map(key => listeners[key]);\n    } */\n\n    return listeners;\n  },\n\n  /**\n   * Fetches the events object and creates one if required.\n   *\n   * @return {Object} The events storage object.\n   * @api private\n   */\n  _getEvents() {\n    return this._events || (this._events = {});\n  }\n};\n\ndraft.mixins.system = {\n  // Cartesian:\n  // - page.system('cartesian')\n  // - (x, y)\n  // - x is right, y is up, z is out of the page (right-hand)\n  // - global origin (0, 0) is at bottom-left\n  //\n  // Polar:\n  // - page.system('polar')\n  // - (r, φ)\n  // - φ is counter-clockwise, with 0 pointing to the right\n  // - global pole (0, 0) is at center\n  //\n  // BACKLOG:30 remove svg coordinates?\n  // Web/SVG:\n  // - page.system('web')\n  // - (x, y)\n  // - x is right, y is down, z is out of the page (left-hand)\n  // - global origin (0, 0) is at top-left\n\n  // BACKLOG:10 switch φ for θ?\n  // BACKLOG:0 Spherical (ρ, θ, φ), Cylindrical (ρ, φ, z)\n  system(system) {\n    /* if (this.prop('system') != system) {\n      // BACKLOG:20 recursively convert all elements to new system?\n    } */\n    return this.prop('system', system);\n  }\n};\n\ndraft.mixins.units = {\n  // Get/set the element's measurement units\n  units(units) {\n    return this.prop('units', units);\n  }\n};\n\ndraft.mixins.position = {\n  // TODO: find better way of only applying supplied values\n  position(x, y, z) {\n    return this.prop({\n      x: unit(x),\n      y: unit(y),\n      z: unit(z)\n    });\n  },\n\n  pos(...args) {\n    return this.position(...args);\n  },\n\n  translate(x, y, z) {\n    x = this.prop('x') + x || 0;\n    y = this.prop('y') + y || 0;\n    z = this.prop('z') + z || 0;\n\n    return this.position(x, y, z);\n  }\n};\n\ndraft.mixins.rotation = {\n  rotation(α, β, γ) {\n    return this.prop({\n      α: α,\n      β: β,\n      γ: γ\n    });\n  },\n\n  rot(...args) {\n    return this.rotation(...args);\n  },\n\n  rotate(α, β, γ) {\n    α = this.prop('α') + α || 0;\n    β = this.prop('β') + β || 0;\n    γ = this.prop('γ') + γ || 0;\n\n    return this.position(α, β, γ);\n  }\n};\n\ndraft.mixins.size = {\n  // Get/set the element's width & height\n  size(width, height) {\n    return this.prop({\n      width: unit(width),\n      height: unit(height)\n    });\n  },\n  // Get/set the element's width\n  width(width) {\n    return draft.px(this.prop('width', unit(width)));\n  },\n  // Get/set the element's height\n  height(height) {\n    return draft.px(this.prop('height', unit(height)));\n  }\n};\n\ndraft.mixins.radius = {\n  // Get/set the element's x radius\n  rx(rx) {\n    return this.prop('rx', unit(rx));\n  },\n  // Get/set the element's y radius\n  ry(ry) {\n    return this.prop('ry', unit(ry));\n  },\n  // Get/set the element's radius\n  radius(rx, ry) {\n    return this.prop({\n      rx: unit(rx),\n      ry: unit(ry)\n    });\n  }\n};\n\n// draft.Element =\ndraft.Element = class Element {\n  constructor(name) {\n    // Make sure this._properties is initialized\n    this._properties = {};\n\n    // Set a name if given\n    if (name) {\n      this.prop('name', name);\n    }\n\n    // HACK:0 need a better way of getting an element's type\n    for (var type in draft) {\n      if (this.constructor === draft[type]) {\n        this._type = type.toLowerCase();\n        break;\n      }\n    }\n  }\n\n  static inherit(source, addSuper) {\n    draft.inherit(this, source, addSuper);\n  }\n\n  static mixin(source) {\n    draft.mixin(this, source);\n  }\n\n  // TODO:40 merge require() with mixin()?\n  static require(source) {\n    if (typeof source == 'string') {\n      this.mixin(draft.mixins[source]);\n    } else if (Array.isArray(source)) {\n      for (var mixin of source) {\n        this.require(mixin);\n      }\n    }\n  }\n\n  get type() {\n    return this._type;\n  }\n\n  get id() {\n    return this._id;\n  }\n\n  get name() {\n    return this.prop('name');\n  }\n\n  // Construct a unique ID from the element's type and ID\n  get domID() {\n    var id = String(this.id);\n    while (id.length < 4) {\n      id = `0${id}`;\n    }\n\n    return `${this.type}_${id}`;\n  }\n\n  prop(prop, val) {\n    if (prop === null) {\n      // BACKLOG: test deleting all properties, perhaps remove it\n      // Delete all properties if prop is null\n      this._properties = {};\n    } else if (prop === undefined) {\n      // Act as a full properties getter if prop is undefined\n      return Object(this._properties);\n    } else if (typeof prop == 'object') {\n      // Act as a getter if prop is an object with only null values.\n      // Act as a setter if prop is an object with at least one non-null value.\n      let setter = false;\n\n      for (var p in prop) {\n        // Get this._properties[p] and save it to prop[p]\n        prop[p] = this.prop(p, prop[p]);\n        // If the returned value is an object, prop[p] is non-null, so act like\n        // a setter.\n        setter = setter || typeof prop[p] == 'object';\n      }\n\n      return setter ? this : prop;\n    } else if (val === null) {\n      // Delete the property if val is null\n      this.fire('change', [prop, val]);\n      delete this._properties[prop];\n    } else if (val === undefined) {\n      // Act as an individual property getter if val is undefined\n\n      // HACK: don't return 0?\n      // If prop is undefined, set it to the default OR 0\n      if (this._properties[prop] === undefined) {\n        this.prop(prop, draft.defaults[prop] || 0);\n      }\n\n      return this._properties[prop];\n    } else {\n      // Act as an individual property setter if both prop and val are defined\n\n      // HACK:10 should use an actual unit data type, not just strings\n      if (String(val).endsWith('_u')) {\n        val = val.slice(0, -2);\n        val = isFinite(val) ?\n          val + this.parent.prop('units') || draft.defaults.units : val;\n      }\n\n      this._properties[prop] = val;\n\n      this.fire('change', [prop, val]);\n    }\n\n    // Chainable if 'this' is returned\n    return this;\n  }\n\n  // TODO: use rest (...blacklist)\n  stringify(blacklist) {\n    var replacer;\n\n    if (Array.isArray(blacklist)) {\n      replacer = function(key, val) {\n        if (blacklist.includes(key)) {\n          return undefined;\n        }\n\n        return val;\n      };\n    } else if (blacklist instanceof RegExp) {\n      replacer = function(key, val) {\n        if (blacklist.test(key)) {\n          return undefined;\n        }\n\n        return val;\n      };\n    }\n\n    return JSON.stringify(this, replacer, 2);\n  }\n\n  toJSON() {\n    return {\n      type: this.type,\n      id: this.id,\n      properties: this.prop(),\n      children: this.children\n    };\n  }\n};\n\ndraft.Element.require([\n  'event',\n  'position',\n  'rotation'\n]);\n\ndraft.Container = class Container extends draft.Element {\n  constructor(name) {\n    super(name);\n\n    // Initialize children array\n    this.children = [];\n  }\n\n  get firstChild() {\n    return this.children[0];\n  }\n\n  get lastChild() {\n    return this.children[this.children.length - 1];\n  }\n\n  add(child) {\n    // Add a reference to the child's parent and containing doc\n    child.parent = this;\n    child.doc = this.doc || this;\n\n    // Add the child to its type array\n    var type = child.type;\n    (child.doc.elements[type] || (child.doc.elements[type] = [])).push(child);\n    // Set the child's id\n    child._id = child.doc.elements[type].length;\n\n    // Add the child to the end of the children array\n    this.children.push(child);\n\n    // Fire the 'add' event to all listeners\n    this.fire('add', [child]);\n\n    return this;\n  }\n\n  push(child) {\n    this.add(child);\n    return child;\n  }\n\n  remove(child) {\n    this.fire('remove', [child]);\n    return this;\n  }\n};\n\ndraft.Doc = class Doc extends draft.Container {\n  constructor(name) {\n    super(name);\n\n    // Initialize elements container\n    this.elements = {};\n\n    this.prop({\n      system: draft.defaults.system,\n      units: draft.defaults.units\n    });\n  }\n};\n\ndraft.doc = function(name) {\n  var doc = new draft.Doc(name);\n\n  (draft.docs || (draft.docs = [])).push(doc);\n  doc._id = draft.docs.length;\n\n  return doc;\n};\n\n/* draft.mixin(draft, {\n  doc(name) {\n    return new draft.Doc(name);\n  }\n}); */\n\ndraft.Group = class Group extends draft.Container {};\n\ndraft.Group.require([\n  'system',\n  'units'\n]);\n\n// TODO: mixin to draft.Group?\ndraft.Container.mixin({\n  group(name) {\n    return this.push(new draft.Group(name)).prop({\n      system: this.prop('system'),\n      units: this.prop('units')\n    });\n  }\n});\n\ndraft.View = class View extends draft.Element {\n  /* render(renderer) {\n    this['render' + renderer.toUpperCase()]();\n  } */\n\n  get aspectRatio() {\n    var gcd = function(a, b) {\n      return b ? gcd(b, a % b) : a;\n    };\n\n    gcd = gcd(this.width(), this.height());\n    return `${this.width() / gcd}:${this.height() / gcd}`;\n  }\n};\n\ndraft.View.require('size');\n\ndraft.Group.mixin({\n  view(width, height) {\n    return this.push(new draft.View()).size(width, height);\n  }\n});\n\ndraft.Line = class Line extends draft.Element {\n  length(length) {\n    return this.prop('length', unit(length));\n  }\n};\n\ndraft.Group.mixin({\n  line(length) {\n    return this.push(new draft.Line()).length(length);\n  }\n});\n\ndraft.Rect = class Rect extends draft.Element {\n  // Hehehe\n  get rekt() {\n    return `${Math.floor(Math.random() * 101)}% rekt`;\n  }\n};\n\ndraft.Rect.require([\n  'size',\n  'radius'\n]);\n\ndraft.Group.mixin({\n  rect(width = 100, height = 100) {\n    return this.push(new draft.Rect()).size(width, height);\n  }\n});\n\ndraft.Circle = class Circle extends draft.Element {\n  radius(r) {\n    return this.prop('r', unit(r));\n  }\n};\n\ndraft.Group.mixin({\n  circle(r = 50) {\n    return this.push(new draft.Circle()).radius(r);\n  }\n});\n\nreturn draft;\n}));\n"],"sourceRoot":"/source/"}